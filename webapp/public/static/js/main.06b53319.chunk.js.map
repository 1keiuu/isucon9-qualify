{"version":3,"sources":["components/ErrorMessageComponent.tsx","components/SignInFormComponent.tsx","errors/ResponseError.ts","errors/AppResponseError.ts","httpClients/appClient.ts","actions/authenticationActions.ts","containers/SignInFormContainer.tsx","components/LoadingComponent.tsx","components/Header/Header.tsx","containers/HeaderContainer.tsx","components/SnackBar.tsx","containers/SnackBarContainer.tsx","actions/snackBarAction.ts","theme.ts","components/BasePageComponent.tsx","containers/BasePageContainer.tsx","pages/SignInPage.tsx","components/SignUpFormComponent.tsx","actions/registerAction.ts","containers/SignUpFormContainer.tsx","pages/SignUpPage.tsx","components/ItemImageUploadComponent.tsx","components/SellFormComponent.tsx","actions/sellingItemAction.ts","containers/SellFormContainer.tsx","actions/errorAction.ts","errors/NotFoundError.ts","actions/fetchItemAction.ts","httpClients/paymentClient.ts","actions/settingsAction.ts","actions/fetchTransactionsAction.ts","actions/fetchUserItemsAction.ts","actions/fetchUserPageDataAction.ts","actions/fetchTimelineAction.ts","reducers/errorReducer.ts","pages/error/NotFoundPage/NotFoundPage.tsx","pages/error/InternalServerErrorPage/InternalServerErrorPage.tsx","hoc/withBaseComponent.tsx","pages/SellPage.tsx","components/ItemFooter/ItemFooter.tsx","components/ItemImage/ItemImage.tsx","pages/ItemPage.tsx","actions/postBumpAction.ts","containers/ItemPageContainer.tsx","components/Item/Item.tsx","components/ItemList/ItemList.tsx","components/SellingButtonComponent.tsx","containers/SellingButtonContainer.tsx","pages/ItemListPage.tsx","containers/ItemListPageContainer.tsx","components/Transaction/Seller/Initial.tsx","components/Transaction/Seller/WaitShipping.tsx","components/Transaction/Seller/WaitDone.tsx","components/Transaction/Seller/Done.tsx","actions/postShippedDoneAction.ts","actions/postShippedAction.ts","containers/SellerTransactionContainer.tsx","components/TransactionSeller/TransactionSeller.tsx","components/Transaction/Buyer/Initial.tsx","components/Transaction/Buyer/WaitShipping.tsx","components/Transaction/Buyer/WaitDone.tsx","components/Transaction/Buyer/Done.tsx","actions/postCompleteAction.ts","containers/BuyerTransactionContainer.tsx","components/TransactionBuyer/TransactionBuyer.tsx","pages/TransactionPage.tsx","containers/TransactionPageContainer.tsx","components/TransactionLabel/TransactionLabel.tsx","components/TransactionComponent/TransactionComponent.tsx","components/TransactionListComponent.tsx","pages/UserPage.tsx","containers/UserPageContainer.tsx","pages/UserSettingPage.tsx","containers/UserSettingPageContainer.tsx","containers/AuthContainer.tsx","components/Route/AuthRoute.tsx","containers/NonAuthContainer.tsx","components/Route/NonAuthRoute.tsx","pages/TopPage.tsx","pages/CategoryItemListPage.tsx","containers/CategoryItemListPageContainer.tsx","pages/BuyComplete.tsx","containers/BuyCompleteContainer.tsx","actions/postItemEditAction.ts","pages/ItemEditPage.tsx","containers/ItemEditPageContainer.tsx","components/LoadingButton/LoadingButton.tsx","components/ItemBuyFormComponent.tsx","errors/PaymentResponseError.ts","actions/buyAction.ts","containers/ItemBuyFormContainer.tsx","pages/ItemBuyPage.tsx","containers/ItemBuyPageContainer.tsx","routes/Route.tsx","App.tsx","middlewares/index.ts","middlewares/logger.ts","middlewares/checkLocationChange.ts","actions/locationChangeAction.ts","reducers/authStatusReducer.ts","reducers/formErrorReducer.ts","reducers/viewingItemReducer.ts","reducers/viewingUserReducer.ts","reducers/pageReducuer.ts","reducers/snackBarReducer.ts","reducers/buyPageReducer.ts","reducers/categoriesReducer.ts","reducers/timelineReducer.ts","reducers/transactionsReducer.ts","reducers/userItemsReducer.ts","reducers/index.ts","index.tsx","configureStore.ts"],"names":["ErrorMessageComponent","_ref","id","error","react_default","a","createElement","FormHelperText","key","SignInPageFormComponent","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","accountName","password","_onSubmit","bind","assertThisInitialized","_onChangeAccountName","_onChangePassword","e","preventDefault","_this$state","onSubmit","setState","target","value","_this$state2","classes","className","paper","Avatar","avatar","LockOutlined","Typography","component","variant","form","noValidate","TextField","margin","required","fullWidth","label","name","autoFocus","onChange","type","autoComplete","ErrorMessageComponent_ErrorMessageComponent","Button","color","onClick","submit","Grid","container","item","xs","react_router_dom","to","routes","register","path","React","Component","withStyles","theme","createStyles","display","flexDirection","alignItems","spacing","backgroundColor","palette","secondary","main","width","marginTop","ResponseError","_Error","message","response","res","inherits","createClass","wrapNativeSuper","Error","AppResponseError","_ResponseError","apply","arguments","appClient","defaultHeaders","params","getParams","URLSearchParams","undefined","set","url","toString","concat","fetch","method","headers","csrfCheckRequired","requestOption","mode","assign","Content-Type","credentials","getCsrfToken","csrf_token","body","JSON","stringify","append","ok","json","LOGIN_SUCCESS","LOGIN_FAIL","postLoginAction","dispatch","AppClient","post","account_name","then","asyncToGenerator","regenerator_default","mark","_callee","errRes","wrap","_context","prev","next","status","sent","abrupt","stop","_x","newAuthState","userId","address","payload","push","top","catch","err","newErros","connect","formError","useStyles","makeStyles","progress","bottom","right","left","position","LoadingComponent","Fragment","CircularProgress","size","appBar","primary","contrastText","text","fontWeight","typography","fontWeightBold","textAlign","list","isLoggedIn","authStatus","ownUserId","goToTopPage","timeline","goToUserPage","user","getPath","goToSettingPage","userSetting","_React$useState","open","_React$useState2","slicedToArray","toggleDrawer","event","_objectSpread","react","Drawer","onClose","List","ListItem","button","ListItemText","AppBar","Toolbar","IconButton","edge","Menu_default","noWrap","close","padding","snackBar","available","reason","handleClose","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","action","aria-label","Close_default","themeInstance","createMuiTheme","background","default","BasePageComponent","MuiThemeProvider","Container","maxWidth","HeaderContainer","loading","components_LoadingComponent","children","SnackBarContainer","paddingTop","page","isLoading","alreadyLoaded","checked","SignInPage","BasePageContainer","SignInFormContainer","SignUpFormComponent","_onChangeAddress","login","REGISTER_SUCCESS","REGISTER_FAIL","postRegisterAction","numSellItems","num_sell_items","newErrors","SignUpPageFormComponent","SignUpPage","SignUpFormContainer","ItemImageUploadComponent","imagePreviewUrl","_handleImageChange","_this2","files","reader","FileReader","file","onloadend","result","onImageChange","readAsDataURL","imagePreview","alt","src","Paper_default","imagePreviewSpace","Avatar_default","Camera","Typography_default","imagePreviewText","Grid_default","direction","justify","accept","upload","htmlFor","Button_default","CloudUpload_default","icon","justifyContent","height","maxHeight","marginLeft","SellFormComponent","description","price","selectedCategoryId","_onImageChange","_onChangeName","_onChangeDescription","_onChangeCategory","_onChangePrice","image","sellItem","categoryError","child","Number","input","validator","isNumeric","no_symbols","_this$props","categories","title","components_ItemImageUploadComponent","multiline","rows","InputLabel","Select","selectForm","inputProps","MenuItem","map","category","categoryName","marginBottom","minWidth","SELLING_ITEM_SUCCESS","SELLING_ITEM_FAIL","listItemAction","categoryId","FormData","postFormData","itemId","filter","parentId","NOT_FOUND_ERROR","INTERNAL_SERVER_ERROR","notFoundError","NotFoundError","fetchItemAction","Promise","resolve","fetchItemStartAction","get","fetchItemSuccessAction","sellerId","seller_id","seller","buyerId","buyer_id","buyer","thumbnailUrl","image_url","parent_id","category_name","parentCategoryName","parent_category_name","transactionEvidenceId","transaction_evidence_id","transactionEvidenceStatus","transaction_evidence_status","shippingStatus","shipping_status","createdAt","created_at","fetchItemFailAction","newError","paymentClient","baseURL","fetchSettings","fetchSettingStartAction","fetchSettingsSuccessAction","csrfToken","PaymentClient","setBaseURL","payment_service_url","fetchItemPageFailAction","settings","fetchTransactionsStartAction","fetchTransactionsSuccessAction","fetchTransactionsFailAction","fetchUserItemsStartAction","fetchUserItemsSuccessAction","fetchUserItemsFailAction","isMyPage","userDataRes","userData","transactions","transactionRes","_errRes","fetchUserPageDataAction","fetchUserPageDataStartAction","fetchUserPageData","userPageData","items","itemsHasNext","has_next","transactionsHasNext","fetchUserPageDataSuccessAction","fetchUserPageDataAction_objectSpread","fetchUserPageDataFailAction","fetchTimelineAction","fetchTimelineStartAction","item_id","fetchTimelineSuccessAction","hasNext","root_category_id","root_category_name","fetchTimelineFailAction","length","errorType","errorCode","img","link","NotFoundPage","InternalServerErrorPage","PageComponentWithError","compose","withProps","branch","renderComponent","SellFormContainer","buyButton","ItemFooter","buttons","disabled","buttonText","ItemImage","imageUrl","isSoldOut","card","itemImage","soldOut","zIndex","borderStyle","borderWidth","borderColor","soldOutText","transform","getUserStyles","Card","ItemPage","load","match","_onClickBuyButton","_onClickItemEditButton","_onClickBumpButton","_onClickTransaction","onClickBuy","onClickItemEdit","onClickBump","onClickTransaction","viewer","root","ItemImage_ItemImage","sm","descSection","Divider","divider","categoryTimeline","charAt","ItemFooter_ItemFooter","textDecoration","POST_BUMP_START","POST_BUMP_SUCCESS","POST_BUMP_FAIL","postBumpAction","isItemLoading","viewingItem","buy","itemEdit","transaction","Item","GridListTile","GridListTileBar","subtitle","gridList","flexWrap","grid","ItemList","loadMore","itemComponents","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","Item_Item","return","react_infinite_scroller_default","pageStart","hasMore","loader","CircularProgress_default","GridList","cellHeight","cols","fab","sell","Fab_default","Edit","fontSize","ItemListPage","SellingButtonContainer","lastItem","loadMoreItems","ItemList_ItemList","overflow","isTimelineLoading","Initial","postShipped","qrCode","WaitShipping","postShippedDone","qrCodeUrl","WaitDone","Done","POST_SHIPPED_DONE_START","POST_SHIPPED_DONE_SUCCESS","POST_SHIPPED_DONE_FAIL","postShippedDoneAction","snackBarMessage","POST_SHIPPED_START","POST_SHIPPED_SUCCESS","POST_SHIPPED_FAIL","postShippedAction","transactionStatus","Seller_Initial","Seller_WaitShipping","Seller_WaitDone","Seller_Done","postComplete","POST_COMPLETE_START","POST_COMPLETE_SUCCESS","POST_COMPLETE_FAIL","postCompleteAction","Buyer_Initial","Buyer_WaitShipping","Buyer_WaitDone","Buyer_Done","TransactionPage","TransactionComponent","auth","NotFoundPage_NotFoundPage","InternalServerErrorPage_InternalServerErrorPage","SellerTransactionContainer","BuyerTransactionContainer","normalLabel","soldOutLabel","grey","A100","tradingLabel","TransactionLabel","itemStatus","_getLabelByStatus","getLabelByStatus","_getLabelByStatus2","labelName","detail","itemTitle","paddingLeft","paddingBottom","CardMedia_default","CardContent_default","TransactionLabel_TransactionLabel","TransactionListComponent","transactionsComponents","TransactionComponent_TransactionComponent","UserPage","ITEM_LIST_TAB","TRANSACTION_LIST_TAB","pageUserId","user_id","loggedInUserId","tabValue","_handleChange","newValue","itemsLoadMore","_this$props2","transactionsLoadMore","lastTransaction","TransactionListComponent_TransactionListComponent","_this$props3","Tabs_default","Tab_default","hidden","_getItemList","_getTransactionsList","tab","light","isUserPageLoading","userItems","viewingUser","fetchUserItemsAction","fetchTransactionsAction","UserSettingPage","rest","objectWithoutProperties","react_router","render","textarea","checklist","TopPage","LoginButtonLink","forwardRef","ref","innerRef","RegisterButtonLink","CategoryItemListPage","category_id","categoryIdIsValid","BuyCompletePage","POST_ITEM_EDIT_START","POST_ITEM_EDIT_SUCCESS","POST_ITEM_EDIT_FAIL","postItemEditAction","itemPrice","reqParams","item_price","itemEditFormError","ItemEditPage","_onClickEdit","onClickEdit","BaseLoadingButton","_onClick","buttonName","LoadingButton","ItemBuyFormComponent","cardNumber","_onChangeCardNumber","isHexadecimal","toUpperCase","onBuyAction","errors","loadingBuy","cardError","appError","buyError","TextField_default","helperText","PaymentResponseError","BUY_START","BUY_SUCCESS","BUY_FAIL","USING_CARD_FAIL","buyItemAction","card_number","shop_id","token","buyComplete","getResponse","usingCardFailAction","buyFailAction","buyFormError","buyPage","ItemBuyPage","ItemBuyFormContainer","AppRoute","NonAuthContainer","exact","AuthContainer","ItemListPageContainer","CategoryItemListPageContainer","SellPage","ItemEditPageContainer","ItemBuyPageContainer","BuyCompleteContainer","ItemPageContainer","TransactionPageContainer","UserSettingPageContainer","UserPageContainer","App","Route_AppRoute","middleware","getState","console","group","info","log","groupEnd","store","LOCATION_CHANGE","router","location","pathname","initialState","authStatusReducer_objectSpread","userPayload","formErrorReducer_objectSpread","viewingItemReducer_objectSpread","viewingUserReducer_objectSpread","pathChangeState","pageReducuer_objectSpread","snackBarReducer_objectSpread","buyPageReducer_objectSpread","categoriesReducer_objectSpread","timelineReducer_objectSpread","transactionsReducer_objectSpread","history","userItemsReducer_objectSpread","createBrowserHistory","reducer","createStore","composeWithDevTools","applyMiddleware","thunk","routerMiddleware","toConsumableArray","getStore","combineReducers","connectRouter","ReactDOM","es","esm","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.06b53319.chunk.js","sourcesContent":["import React from 'react';\nimport { FormHelperText } from '@material-ui/core';\n\ninterface ErrorMessageComponentProps {\n  id: string;\n  error: string;\n}\n\nconst ErrorMessageComponent: React.FC<ErrorMessageComponentProps> = ({\n  id,\n  error,\n}) => {\n  return (\n    <FormHelperText key={error} id={id} error={true}>\n      {error}\n    </FormHelperText>\n  );\n};\n\nexport { ErrorMessageComponent };\n","import React from 'react';\n\nimport {\n  Avatar,\n  Typography,\n  TextField,\n  Button,\n  Grid,\n  createStyles,\n  WithStyles,\n} from '@material-ui/core';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport { LockOutlined } from '@material-ui/icons';\nimport { Link as RouteLink } from 'react-router-dom';\nimport { StyleRules } from '@material-ui/core/styles';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { ErrorMessageComponent } from './ErrorMessageComponent';\nimport { routes } from '../routes/Route';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    paper: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n      width: '100%',\n      marginTop: theme.spacing(1),\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2),\n    },\n  });\n\ninterface SignInFormComponentProps extends WithStyles<typeof styles> {\n  onSubmit: (accountName: string, password: string) => void;\n  error?: string;\n}\n\ninterface SignInFormComponentState {\n  accountName: string;\n  password: string;\n}\n\nclass SignInPageFormComponent extends React.Component<\n  SignInFormComponentProps,\n  SignInFormComponentState\n> {\n  constructor(props: SignInFormComponentProps) {\n    super(props);\n\n    this.state = {\n      accountName: '',\n      password: '',\n    };\n\n    this._onSubmit = this._onSubmit.bind(this);\n    this._onChangeAccountName = this._onChangeAccountName.bind(this);\n    this._onChangePassword = this._onChangePassword.bind(this);\n  }\n\n  _onSubmit(e: React.MouseEvent) {\n    e.preventDefault();\n    const { accountName, password } = this.state;\n    this.props.onSubmit(accountName, password);\n  }\n\n  _onChangeAccountName(e: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({\n      accountName: e.target.value,\n    });\n  }\n\n  _onChangePassword(e: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({\n      password: e.target.value,\n    });\n  }\n\n  render() {\n    const { accountName, password } = this.state;\n    const { classes } = this.props;\n\n    return (\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlined />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          ログインページ\n        </Typography>\n        <form className={classes.form} noValidate>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"accountName\"\n            label=\"ユーザ名\"\n            name=\"accountName\"\n            autoFocus\n            value={accountName}\n            onChange={this._onChangeAccountName}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"password\"\n            label=\"パスワード\"\n            name=\"password\"\n            type=\"password\"\n            autoComplete=\"current-password\"\n            value={password}\n            onChange={this._onChangePassword}\n          />\n          {this.props.error && (\n            <ErrorMessageComponent id=\"signInButton\" error={this.props.error} />\n          )}\n          <Button\n            id=\"signInButton\"\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={this._onSubmit}\n            className={classes.submit}\n          >\n            ログイン\n          </Button>\n          <Grid container>\n            <Grid item xs>\n              <RouteLink to={routes.register.path}>新規登録はこちら</RouteLink>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(SignInPageFormComponent);\n","export class ResponseError extends Error {\n  private readonly res: Response | undefined;\n\n  constructor(message: string, response?: Response) {\n    super(message);\n    this.res = response;\n  }\n\n  getResponse(): Response | undefined {\n    return this.res;\n  }\n}\n","import { ResponseError } from './ResponseError';\n\nexport class AppResponseError extends ResponseError {}\n","import { SettingsRes } from '../types/appApiTypes';\nimport { AppResponseError } from '../errors/AppResponseError';\n\n/**\n * HTTP client for main app\n */\nclass AppClient {\n  private defaultHeaders: HeadersInit = {};\n\n  async get(path: string, params: Record<string, any> = {}): Promise<Response> {\n    let getParams = new URLSearchParams();\n    for (const key in params) {\n      const value = params[key];\n      if (value !== undefined) {\n        getParams.set(key, params[key]);\n      }\n    }\n\n    let url = `${path}`;\n    if (getParams.toString() !== '') {\n      url = `${url}?${getParams.toString()}`;\n    }\n\n    return await fetch(url, {\n      method: 'GET',\n      headers: this.defaultHeaders,\n    });\n  }\n\n  async post(\n    path: string,\n    params: any = {},\n    csrfCheckRequired: boolean = true,\n  ): Promise<Response> {\n    let requestOption: RequestInit = {\n      method: 'POST',\n      mode: 'same-origin',\n      headers: Object.assign({}, this.defaultHeaders, {\n        'Content-Type': 'application/json',\n      }),\n      credentials: 'same-origin',\n    };\n\n    if (csrfCheckRequired) {\n      params.csrf_token = await this.getCsrfToken();\n    }\n\n    requestOption.body = JSON.stringify(params);\n\n    return await fetch(path, requestOption);\n  }\n\n  async postFormData(path: string, body: FormData): Promise<Response> {\n    let requestOption: RequestInit = {\n      method: 'POST',\n      mode: 'same-origin',\n      // MEMO: The reason why we should not set Content-Type header by ourselves\n      // https://stackoverflow.com/questions/39280438/fetch-missing-boundary-in-multipart-form-data-post\n      headers: this.defaultHeaders,\n      credentials: 'same-origin',\n    };\n\n    body.append('csrf_token', await this.getCsrfToken());\n    requestOption.body = body;\n\n    return await fetch(path, requestOption);\n  }\n\n  private async getCsrfToken(): Promise<string> {\n    const res: Response = await fetch('/settings', {\n      method: 'GET',\n      headers: this.defaultHeaders,\n    });\n\n    if (!res.ok) {\n      throw new AppResponseError('CSRF tokenの取得に失敗しました', res);\n    }\n\n    const body: SettingsRes = await res.json();\n\n    return body.csrf_token;\n  }\n}\n\nexport default new AppClient();\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport { CallHistoryMethodAction, push } from 'connected-react-router';\nimport { routes } from '../routes/Route';\nimport { AppState } from '../index';\nimport { ErrorRes, LoginRes } from '../types/appApiTypes';\nimport { AppResponseError } from '../errors/AppResponseError';\n\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAIL = 'LOGIN_FAIL';\n\nexport type AuthActions =\n  | LoginSuccessAction\n  | LoginFailAction\n  | CallHistoryMethodAction;\n\ntype ThunkResult<R> = ThunkAction<R, AppState, undefined, AuthActions>;\n\nexport function postLoginAction(\n  accountName: string,\n  password: string,\n): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, AuthActions>) => {\n    AppClient.post(\n      '/login',\n      {\n        account_name: accountName,\n        password: password,\n      },\n      false,\n    )\n      .then(async (response: Response) => {\n        if (response.status !== 200) {\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: LoginRes) => {\n        dispatch(\n          loginSuccessAction({\n            userId: body.id,\n            accountName: body.account_name,\n            address: body.address,\n          }),\n        );\n        dispatch(push(routes.top.path));\n      })\n      .catch((err: Error) => {\n        dispatch(\n          loginFailAction({\n            error: err.message,\n          }),\n        );\n      });\n  };\n}\n\nexport interface LoginSuccessAction {\n  type: typeof LOGIN_SUCCESS;\n  payload: {\n    userId: number;\n    accountName: string;\n    address?: string;\n  };\n}\n\nexport function loginSuccessAction(newAuthState: {\n  userId: number;\n  accountName: string;\n  address?: string;\n}): LoginSuccessAction {\n  return {\n    type: LOGIN_SUCCESS,\n    payload: newAuthState,\n  };\n}\n\nexport interface LoginFailAction {\n  type: typeof LOGIN_FAIL;\n  payload: FormErrorState;\n}\n\nexport function loginFailAction(newErros: FormErrorState): LoginFailAction {\n  return {\n    type: LOGIN_FAIL,\n    payload: newErros,\n  };\n}\n","import SignInPageFormComponent from '../components/SignInFormComponent';\nimport { connect } from 'react-redux';\nimport { postLoginAction } from '../actions/authenticationActions';\nimport { AppState } from '../index';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { AnyAction } from 'redux';\n\nconst mapStateToProps = (state: AppState) => ({\n  error: state.formError.error,\n});\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, AnyAction>,\n) => ({\n  onSubmit: (accountName: string, password: string) => {\n    dispatch(postLoginAction(accountName, password));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(SignInPageFormComponent);\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst useStyles = makeStyles(theme => ({\n  progress: {\n    top: 0,\n    bottom: 0,\n    right: 0,\n    left: 0,\n    margin: 'auto',\n    position: 'absolute',\n  },\n}));\n\nconst LoadingComponent: React.FC = () => {\n  const classes = useStyles();\n\n  return (\n    <React.Fragment>\n      <CircularProgress size={80} className={classes.progress} />\n    </React.Fragment>\n  );\n};\n\nexport default LoadingComponent;\n","import * as React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { AppBar, Theme } from '@material-ui/core';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport Typography from '@material-ui/core/Typography';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  appBar: {\n    color: theme.palette.primary.main,\n    backgroundColor: theme.palette.primary.contrastText,\n  },\n  text: {\n    fontWeight: theme.typography.fontWeightBold,\n    textAlign: 'center',\n    width: '100%', // センタリング\n  },\n  list: {\n    width: '200px',\n  },\n}));\n\ninterface Props {\n  isLoggedIn: boolean;\n  ownUserId: number;\n  goToTopPage: () => void;\n  goToUserPage: (userId: number) => void;\n  goToSettingPage: () => void;\n}\n\nconst Header: React.FC<Props> = ({\n  isLoggedIn,\n  ownUserId,\n  goToTopPage,\n  goToUserPage,\n  goToSettingPage,\n}) => {\n  const classes = useStyles();\n  const [state, setState] = React.useState({\n    open: false,\n  });\n\n  const onClickTop = (e: React.MouseEvent) => {\n    e.preventDefault();\n    goToTopPage();\n  };\n\n  const onClickMyPage = (e: React.MouseEvent) => {\n    e.preventDefault();\n    goToUserPage(ownUserId);\n  };\n\n  const onClickMySettingPage = (e: React.MouseEvent) => {\n    e.preventDefault();\n    goToSettingPage();\n  };\n\n  const toggleDrawer = (open: boolean) => (event: React.MouseEvent) => {\n    event.preventDefault();\n    setState({ ...state, open });\n  };\n\n  return (\n    <React.Fragment>\n      {isLoggedIn && (\n        <Drawer open={state.open} onClose={toggleDrawer(false)}>\n          <List className={classes.list}>\n            <ListItem button onClick={onClickTop}>\n              <ListItemText primary=\"新着商品\" />\n            </ListItem>\n            <ListItem button onClick={onClickMyPage}>\n              <ListItemText primary=\"マイページ\" />\n            </ListItem>\n            <ListItem button onClick={onClickMySettingPage}>\n              <ListItemText primary=\"設定\" />\n            </ListItem>\n          </List>\n        </Drawer>\n      )}\n      <AppBar className={classes.appBar} position=\"fixed\">\n        <Toolbar>\n          {isLoggedIn && (\n            <IconButton\n              color=\"inherit\"\n              onClick={toggleDrawer(true)}\n              edge=\"start\"\n            >\n              <MenuIcon />\n            </IconButton>\n          )}\n          <Typography className={classes.text} variant=\"h5\" noWrap>\n            ISUCARI\n          </Typography>\n        </Toolbar>\n      </AppBar>\n    </React.Fragment>\n  );\n};\n\nexport { Header };\n","import { AppState } from '../index';\nimport { Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport { routes } from '../routes/Route';\nimport { Header } from '../components/Header';\n\nconst mapStateToProps = (state: AppState) => ({\n  isLoggedIn: !!state.authStatus.userId,\n  ownUserId: state.authStatus.userId || 0,\n});\n\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  goToTopPage: () => {\n    dispatch(push(routes.timeline.path));\n  },\n  goToUserPage: (userId: number) => {\n    dispatch(push(routes.user.getPath(userId)));\n  },\n  goToSettingPage: () => {\n    dispatch(push(routes.userSetting.path));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(Header);\n","import * as React from 'react';\nimport { Snackbar } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\n\nconst useStyles = makeStyles(theme => ({\n  close: {\n    padding: theme.spacing(0.5),\n  },\n}));\n\ntype Props = {\n  open: boolean;\n  message?: string;\n  handleClose: (event: React.MouseEvent) => void;\n};\n\nconst SnackBar: React.FC<Props> = ({ open, message, handleClose }) => {\n  const classes = useStyles();\n\n  const handleOnClose = (event: React.SyntheticEvent, reason: string) => {\n    return handleClose(event as React.MouseEvent);\n  };\n\n  return (\n    <React.Fragment>\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        open={open}\n        autoHideDuration={6000}\n        onClose={handleOnClose}\n        message={<span>{message}</span>}\n        action={[\n          <IconButton\n            key=\"close\"\n            aria-label=\"close\"\n            color=\"inherit\"\n            className={classes.close}\n            onClick={handleClose}\n          >\n            <CloseIcon />\n          </IconButton>,\n        ]}\n      />\n    </React.Fragment>\n  );\n};\n\nexport { SnackBar };\n","import { connect } from 'react-redux';\nimport { AppState } from '../index';\nimport { Dispatch } from 'redux';\nimport { closeSnackBarAction } from '../actions/snackBarAction';\nimport { SnackBar } from '../components/SnackBar';\n\nconst mapStateToProps = (state: AppState) => ({\n  open: state.snackBar.available,\n  message: state.snackBar.reason,\n});\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  handleClose(event: React.MouseEvent) {\n    dispatch(closeSnackBarAction());\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(SnackBar);\n","import { Action } from 'redux';\n\nexport const SNACK_BAR_CLOSE = 'SNACK_BAR_CLOSE';\n\nexport type SnackBarActions = SnackBarClose;\n\nexport interface SnackBarClose extends Action<typeof SNACK_BAR_CLOSE> {}\n\nexport const closeSnackBarAction = (): SnackBarClose => ({\n  type: SNACK_BAR_CLOSE,\n});\n","import { createMuiTheme } from '@material-ui/core';\n\nexport const themeInstance = createMuiTheme({\n  palette: {\n    background: {\n      default: '#fff',\n    },\n    primary: {\n      main: '#f44436',\n    },\n    secondary: {\n      main: '#4fc3f7',\n      contrastText: '#fff',\n    },\n  },\n});\n","import React, { PropsWithChildren } from 'react';\nimport {\n  Container,\n  MuiThemeProvider,\n  Theme,\n  WithStyles,\n} from '@material-ui/core';\nimport LoadingComponent from './LoadingComponent';\nimport HeaderContainer from '../containers/HeaderContainer';\nimport SnackBarContainer from '../containers/SnackBarContainer';\nimport { StyleRules } from '@material-ui/core/styles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { themeInstance } from '../theme';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    container: {\n      paddingTop: theme.spacing(12),\n    },\n  });\n\ninterface BaseProps extends WithStyles<typeof styles> {\n  loading: boolean;\n}\n\nexport type Props = PropsWithChildren<BaseProps>;\n\nclass BasePageComponent extends React.Component<Props> {\n  render() {\n    const { classes } = this.props;\n\n    return (\n      <MuiThemeProvider theme={themeInstance}>\n        <Container maxWidth=\"md\" className={classes.container}>\n          <HeaderContainer />\n          {this.props.loading ? (\n            <LoadingComponent />\n          ) : (\n            this.props.children || null\n          )}\n          <SnackBarContainer />\n        </Container>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default withStyles(styles)(BasePageComponent);\n","import { connect } from 'react-redux';\nimport { AppState } from '../index';\nimport BasePageComponent from '../components/BasePageComponent';\nimport { Dispatch } from 'redux';\n\nconst mapStateToProps = (state: AppState) => ({\n  loading: state.page.isLoading,\n  alreadyLoaded: state.authStatus.checked,\n});\nconst mapDispatchToProps = (dispatch: Dispatch) => ({});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(BasePageComponent);\n","import React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core';\nimport SignInFormContainer from '../containers/SignInFormContainer';\nimport BasePageContainer from '../containers/BasePageContainer';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  paper: {\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n}));\n\ntype Props = {};\n\nconst SignInPage: React.FC<Props> = () => {\n  const classes = useStyles();\n\n  return (\n    <BasePageContainer>\n      <div className={classes.paper}>\n        <SignInFormContainer />\n      </div>\n    </BasePageContainer>\n  );\n};\n\nexport default SignInPage;\n","import React from 'react';\nimport {\n  Avatar,\n  createStyles,\n  Theme,\n  Typography,\n  WithStyles,\n} from '@material-ui/core';\nimport { LockOutlined } from '@material-ui/icons';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport { Link as RouteLink } from 'react-router-dom';\nimport { StyleRules } from '@material-ui/core/styles';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { RegisterReq } from '../types/appApiTypes';\nimport { ErrorMessageComponent } from './ErrorMessageComponent';\nimport { routes } from '../routes/Route';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    paper: {\n      marginTop: theme.spacing(1),\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n      width: '100%',\n      marginTop: theme.spacing(1),\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2),\n    },\n  });\n\ninterface SignUpFormComponentProps extends WithStyles<typeof styles> {\n  register: (params: RegisterReq) => void;\n  error?: string;\n}\n\ninterface SignUpFormComponentState {\n  accountName: string;\n  address: string;\n  password: string;\n}\n\nclass SignUpFormComponent extends React.Component<\n  SignUpFormComponentProps,\n  SignUpFormComponentState\n> {\n  constructor(props: SignUpFormComponentProps) {\n    super(props);\n\n    this.state = {\n      accountName: '',\n      address: '',\n      password: '',\n    };\n\n    this._onSubmit = this._onSubmit.bind(this);\n    this._onChangeAccountName = this._onChangeAccountName.bind(this);\n    this._onChangeAddress = this._onChangeAddress.bind(this);\n    this._onChangePassword = this._onChangePassword.bind(this);\n  }\n\n  _onSubmit(e: React.MouseEvent) {\n    e.preventDefault();\n    this.props.register({\n      account_name: this.state.accountName,\n      address: this.state.address,\n      password: this.state.password,\n    });\n  }\n\n  _onChangeAccountName(e: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({\n      accountName: e.target.value,\n    });\n  }\n\n  _onChangeAddress(e: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({\n      address: e.target.value,\n    });\n  }\n\n  _onChangePassword(e: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({\n      password: e.target.value,\n    });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { accountName, address, password } = this.state;\n\n    return (\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlined />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          新規登録\n        </Typography>\n        <form className={classes.form} noValidate>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"name\"\n            label=\"ユーザ名\"\n            name=\"name\"\n            value={accountName}\n            onChange={this._onChangeAccountName}\n            autoFocus\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"address\"\n            label=\"住所\"\n            name=\"address\"\n            value={address}\n            onChange={this._onChangeAddress}\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"password\"\n            label=\"パスワード\"\n            name=\"password\"\n            type=\"password\"\n            value={password}\n            onChange={this._onChangePassword}\n          />\n          {this.props.error && (\n            <ErrorMessageComponent id=\"signUpButton\" error={this.props.error} />\n          )}\n          <Button\n            id=\"signUpButton\"\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            onClick={this._onSubmit}\n          >\n            新規登録\n          </Button>\n          <Grid container>\n            <Grid item xs>\n              <RouteLink to={routes.login.path}>\n                すでにアカウントをお持ちの方はこちら\n              </RouteLink>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(SignUpFormComponent);\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport { CallHistoryMethodAction, push } from 'connected-react-router';\nimport { ErrorRes, RegisterReq, RegisterRes } from '../types/appApiTypes';\nimport { routes } from '../routes/Route';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { AppState } from '../index';\n\nexport const REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nexport const REGISTER_FAIL = 'REGISTER_FAIL';\n\nexport type RegisterActions =\n  | RegisterSuccessAction\n  | RegisterFailAction\n  | CallHistoryMethodAction;\ntype ThunkResult<R> = ThunkAction<R, AppState, undefined, RegisterActions>;\n\nexport function postRegisterAction(payload: RegisterReq): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, RegisterActions>) => {\n    AppClient.post('/register', payload, false)\n      .then(async (response: Response) => {\n        if (response.status !== 200) {\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: RegisterRes) => {\n        dispatch(\n          registerSuccessAction({\n            userId: body.id,\n            accountName: body.account_name,\n            address: body.address,\n            numSellItems: body.num_sell_items,\n          }),\n        );\n        dispatch(push(routes.top.path));\n      })\n      .catch((err: Error) => {\n        dispatch(\n          registerFailAction({\n            error: err.message,\n          }),\n        );\n      });\n  };\n}\n\nexport interface RegisterSuccessAction extends Action<typeof REGISTER_SUCCESS> {\n  payload: {\n    userId: number;\n    accountName: string;\n    address: string;\n  };\n}\n\nexport function registerSuccessAction(newAuthState: {\n  userId: number;\n  accountName: string;\n  address: string;\n  numSellItems: number;\n}): RegisterSuccessAction {\n  return {\n    type: REGISTER_SUCCESS,\n    payload: newAuthState,\n  };\n}\n\nexport interface RegisterFailAction extends Action<typeof REGISTER_FAIL> {\n  payload: FormErrorState;\n}\n\nexport function registerFailAction(\n  newErrors: FormErrorState,\n): RegisterFailAction {\n  return {\n    type: REGISTER_FAIL,\n    payload: newErrors,\n  };\n}\n","import SignUpPageFormComponent from '../components/SignUpFormComponent';\nimport { connect } from 'react-redux';\nimport { postRegisterAction } from '../actions/registerAction';\nimport { RegisterReq } from '../types/appApiTypes';\nimport { AppState } from '../index';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { AnyAction } from 'redux';\n\nconst mapStateToProps = (state: AppState) => ({\n  error: state.formError.error,\n});\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, AnyAction>,\n) => ({\n  register: (params: RegisterReq) => {\n    dispatch(postRegisterAction(params));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(SignUpPageFormComponent);\n","import React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport SignUpFormContainer from '../containers/SignUpFormContainer';\nimport BasePageContainer from '../containers/BasePageContainer';\nimport { Theme } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  paper: {\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n}));\n\nconst SignUpPage: React.FC = () => {\n  const classes = useStyles();\n\n  return (\n    <BasePageContainer>\n      <div className={classes.paper}>\n        <SignUpFormContainer />\n      </div>\n    </BasePageContainer>\n  );\n};\n\nexport default SignUpPage;\n","import React from 'react';\nimport Paper from '@material-ui/core/Paper/Paper';\nimport Avatar from '@material-ui/core/Avatar/Avatar';\nimport { Camera } from '@material-ui/icons';\nimport Typography from '@material-ui/core/Typography/Typography';\nimport { Theme } from '@material-ui/core/styles/createMuiTheme';\nimport CloudUpload from '@material-ui/icons/CloudUpload';\nimport withStyles, {\n  WithStyles,\n  StyleRules,\n} from '@material-ui/core/styles/withStyles';\nimport createStyles from '@material-ui/core/styles/createStyles';\nimport Grid from '@material-ui/core/Grid/Grid';\nimport Button from '@material-ui/core/Button/Button';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    imagePreviewSpace: {\n      display: 'flex',\n      justifyContent: 'center',\n      flexDirection: 'column',\n      alignItems: 'center',\n      height: '300px',\n    },\n    imagePreviewText: {\n      margin: theme.spacing(2, 0),\n    },\n    imagePreview: {\n      width: 'auto',\n      height: '100%',\n      maxHeight: '300px',\n    },\n    upload: {\n      display: 'none',\n    },\n    icon: {\n      marginLeft: theme.spacing(1),\n    },\n    avatar: {\n      margin: theme.spacing(1),\n    },\n    button: {\n      margin: theme.spacing(1),\n    },\n  });\n\ninterface Props extends WithStyles<typeof styles> {\n  onImageChange: (image: Blob) => void;\n}\n\ninterface State {\n  file?: File;\n  imagePreviewUrl: string;\n}\n\nclass ItemImageUploadComponent extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      imagePreviewUrl: '',\n    };\n    this._handleImageChange = this._handleImageChange.bind(this);\n  }\n\n  _handleImageChange(e: React.ChangeEvent<HTMLInputElement>) {\n    e.preventDefault();\n\n    if (e.target.files === null) {\n      return;\n    }\n\n    const reader = new FileReader();\n    const file = e.target.files[0];\n\n    reader.onloadend = () => {\n      if (typeof reader.result !== 'string') {\n        throw new Error();\n      }\n\n      this.setState({\n        file: file,\n        imagePreviewUrl: reader.result,\n      });\n\n      this.props.onImageChange(file);\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { imagePreviewUrl } = this.state;\n    let imagePreview = null;\n\n    if (imagePreviewUrl) {\n      imagePreview = (\n        <img\n          className={classes.imagePreview}\n          alt=\"プレビュー\"\n          src={imagePreviewUrl}\n        />\n      );\n    } else {\n      imagePreview = (\n        <Paper className={classes.imagePreviewSpace}>\n          <Avatar className={classes.avatar}>\n            <Camera />\n          </Avatar>\n          <Typography className={classes.imagePreviewText} variant=\"h6\">\n            商品画像\n          </Typography>\n        </Paper>\n      );\n    }\n\n    return (\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"space-between\"\n        alignItems=\"center\"\n      >\n        <Grid item xs={8}>\n          {imagePreview}\n        </Grid>\n        <Grid item xs={4}>\n          <input\n            accept=\"image/*\"\n            className={classes.upload}\n            id=\"outlined-button-file\"\n            type=\"file\"\n            onChange={this._handleImageChange}\n          />\n          <label htmlFor=\"outlined-button-file\">\n            <Button\n              variant=\"outlined\"\n              color=\"default\"\n              component=\"span\"\n              className={classes.button}\n            >\n              Upload\n              <CloudUpload className={classes.icon} />\n            </Button>\n          </label>\n        </Grid>\n      </Grid>\n    );\n  }\n}\n\nexport default withStyles(styles)(ItemImageUploadComponent);\n","import React, { ReactNode } from 'react';\n\nimport {\n  Typography,\n  TextField,\n  Button,\n  createStyles,\n  Theme,\n  WithStyles,\n} from '@material-ui/core';\nimport ItemImageUploadComponent from '../components/ItemImageUploadComponent';\nimport { StyleRules } from '@material-ui/core/styles';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport validator from 'validator';\nimport { ErrorMessageComponent } from './ErrorMessageComponent';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    title: {\n      marginBottom: theme.spacing(2),\n    },\n    form: {\n      width: '80%',\n      marginTop: theme.spacing(1),\n    },\n    selectForm: {\n      minWidth: '200px',\n      margin: theme.spacing(1, 0, 2),\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2),\n    },\n  });\n\ninterface SellFormComponentProps extends WithStyles<typeof styles> {\n  sellItem: (\n    name: string,\n    description: string,\n    price: number,\n    categoryId: number,\n    image: Blob,\n  ) => void;\n  error?: string;\n  categories: {\n    id: number;\n    categoryName: string;\n  }[];\n}\n\ninterface SellFormComponentState {\n  name: string;\n  description: string;\n  price: number;\n  selectedCategoryId: number;\n  image?: Blob;\n  categoryError?: string;\n}\n\nclass SellFormComponent extends React.Component<\n  SellFormComponentProps,\n  SellFormComponentState\n> {\n  constructor(props: SellFormComponentProps) {\n    super(props);\n\n    this.state = {\n      name: '',\n      description: '',\n      price: 0,\n      selectedCategoryId: 0,\n    };\n\n    this._onSubmit = this._onSubmit.bind(this);\n    this._onImageChange = this._onImageChange.bind(this);\n    this._onChangeName = this._onChangeName.bind(this);\n    this._onChangeDescription = this._onChangeDescription.bind(this);\n    this._onChangeCategory = this._onChangeCategory.bind(this);\n    this._onChangePrice = this._onChangePrice.bind(this);\n  }\n\n  _onSubmit(e: React.MouseEvent) {\n    e.preventDefault();\n    const { name, description, price, selectedCategoryId, image } = this.state;\n\n    if (!selectedCategoryId) {\n      this.setState({\n        categoryError: 'カテゴリを選択してください',\n      });\n      return;\n    }\n\n    if (image === undefined) {\n      this.setState({\n        categoryError: '画像をアップロードしてください',\n      });\n      return;\n    }\n\n    this.props.sellItem(name, description, price, selectedCategoryId, image);\n  }\n\n  _onImageChange(image: Blob) {\n    this.setState({\n      image,\n    });\n  }\n\n  _onChangeName(e: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({\n      name: e.target.value,\n    });\n  }\n\n  _onChangeDescription(e: React.ChangeEvent<HTMLInputElement>) {\n    this.setState({\n      description: e.target.value,\n    });\n  }\n\n  _onChangeCategory(e: React.ChangeEvent<any>, child: ReactNode) {\n    this.setState({\n      selectedCategoryId: Number(e.target.value),\n    });\n  }\n\n  _onChangePrice(e: React.ChangeEvent<HTMLInputElement>) {\n    const input = e.target.value;\n\n    // Only allow number\n    if (!validator.isNumeric(input, { no_symbols: true })) {\n      e.preventDefault();\n      return;\n    }\n\n    this.setState({\n      price: Number(input),\n    });\n  }\n\n  render() {\n    const { classes, categories } = this.props;\n    const {\n      name,\n      description,\n      price,\n      selectedCategoryId,\n      categoryError,\n    } = this.state;\n\n    return (\n      <React.Fragment>\n        <Typography className={classes.title} component=\"h1\" variant=\"h5\">\n          出品ページ\n        </Typography>\n        <form className={classes.form} noValidate>\n          <ItemImageUploadComponent onImageChange={this._onImageChange} />\n\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"name\"\n            label=\"商品名\"\n            name=\"name\"\n            value={name}\n            onChange={this._onChangeName}\n            autoFocus\n          />\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"description\"\n            label=\"商品説明\"\n            name=\"description\"\n            value={description}\n            onChange={this._onChangeDescription}\n            multiline\n            rows={5}\n          />\n\n          <InputLabel htmlFor=\"choose-category\">カテゴリ</InputLabel>\n          <Select\n            className={classes.selectForm}\n            value={selectedCategoryId}\n            onChange={this._onChangeCategory}\n            inputProps={{\n              name: 'category',\n              id: 'choose-category',\n            }}\n          >\n            <MenuItem value={0}>\n              <em>-</em>\n            </MenuItem>\n            {categories.map(category => (\n              <MenuItem value={category.id}>{category.categoryName}</MenuItem>\n            ))}\n          </Select>\n          {categoryError && (\n            <ErrorMessageComponent id=\"choose-category\" error={categoryError} />\n          )}\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"price\"\n            label=\"値段\"\n            name=\"price\"\n            value={price}\n            onChange={this._onChangePrice}\n          />\n          {this.props.error && (\n            <ErrorMessageComponent id=\"sellButton\" error={this.props.error} />\n          )}\n          <Button\n            id=\"sellButton\"\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            onClick={this._onSubmit}\n          >\n            出品する\n          </Button>\n        </form>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(SellFormComponent);\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport { CallHistoryMethodAction, push } from 'connected-react-router';\nimport { Action } from 'redux';\nimport { ErrorRes, SellRes } from '../types/appApiTypes';\nimport { routes } from '../routes/Route';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { AppState } from '../index';\n\nexport const SELLING_ITEM_SUCCESS = 'SELLING_ITEM_SUCCESS';\nexport const SELLING_ITEM_FAIL = 'SELLING_ITEM_FAIL';\n\nexport type SellingItemActions =\n  | SellingSuccessAction\n  | SellingFailAction\n  | CallHistoryMethodAction;\ntype ThunkResult<R> = ThunkAction<R, AppState, undefined, SellingItemActions>;\n\nexport function listItemAction(\n  name: string,\n  description: string,\n  price: number,\n  categoryId: number,\n  image: Blob,\n): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, SellingItemActions>) => {\n    const body = new FormData();\n    body.append('name', name);\n    body.append('description', description);\n    body.append('price', price.toString());\n    body.append('category_id', categoryId.toString());\n    body.append('image', image);\n    AppClient.postFormData('/sell', body)\n      .then(async (response: Response) => {\n        if (!response.ok) {\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n        return await response.json();\n      })\n      .then((body: SellRes) => {\n        dispatch(sellingSuccessAction(body.id));\n        dispatch(push(routes.timeline.path));\n      })\n      .catch((err: Error) => {\n        dispatch(\n          sellingFailAction({\n            error: err.message,\n          }),\n        );\n      });\n  };\n}\n\nexport interface SellingSuccessAction\n  extends Action<typeof SELLING_ITEM_SUCCESS> {\n  payload: {\n    itemId: number;\n  };\n}\n\nexport function sellingSuccessAction(itemId: number): SellingSuccessAction {\n  return {\n    type: SELLING_ITEM_SUCCESS,\n    payload: { itemId },\n  };\n}\n\nexport interface SellingFailAction extends Action<typeof SELLING_ITEM_FAIL> {\n  payload: FormErrorState;\n}\n\nexport function sellingFailAction(\n  newErrors: FormErrorState,\n): SellingFailAction {\n  return {\n    type: SELLING_ITEM_FAIL,\n    payload: newErrors,\n  };\n}\n","import { connect } from 'react-redux';\nimport SellFormComponent from '../components/SellFormComponent';\nimport { listItemAction } from '../actions/sellingItemAction';\nimport { AppState } from '../index';\nimport { AnyAction } from 'redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { CategorySimple } from '../dataObjects/category';\n\nconst mapStateToProps = (state: AppState) => {\n  // Note: Parent category's parent_id is 0\n  const categories = state.categories.categories.filter(\n    (category: CategorySimple) => category.parentId !== 0,\n  );\n\n  return {\n    error: state.formError.error,\n    categories,\n  };\n};\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, AnyAction>,\n) => ({\n  sellItem: (\n    name: string,\n    description: string,\n    price: number,\n    categoryId: number,\n    image: Blob,\n  ) => {\n    dispatch(listItemAction(name, description, price, categoryId, image));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(SellFormComponent);\n","import { Action } from 'redux';\n\nexport const NOT_FOUND_ERROR = 'NOT_FOUND_ERROR';\nexport const INTERNAL_SERVER_ERROR = 'INTERNAL_SERVER_ERROR';\n\nexport type ErrorActions = NotFoundErrorAction | InternalServerErrorAction;\n\nexport interface NotFoundErrorAction extends Action<typeof NOT_FOUND_ERROR> {}\n\nexport function notFoundError(): NotFoundErrorAction {\n  return { type: NOT_FOUND_ERROR };\n}\n\nexport interface InternalServerErrorAction\n  extends Action<typeof INTERNAL_SERVER_ERROR> {}\n\nexport function internalServerError(): InternalServerErrorAction {\n  return { type: INTERNAL_SERVER_ERROR };\n}\n","// will be handled as HTTP 404 NotFound\nexport class NotFoundError extends Error {}\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport { ErrorRes, GetItemRes } from '../types/appApiTypes';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { ItemData } from '../dataObjects/item';\nimport { NotFoundError } from '../errors/NotFoundError';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport { AppState } from '../index';\nimport { notFoundError, NotFoundErrorAction } from './errorAction';\n\nexport const FETCH_ITEM_START = 'FETCH_ITEM_START';\nexport const FETCH_ITEM_SUCCESS = 'FETCH_ITEM_SUCCESS';\nexport const FETCH_ITEM_FAIL = 'FETCH_ITEM_FAIL';\n\nexport type FetchItemActions =\n  | FetchItemStartAction\n  | FetchItemSuccessAction\n  | FetchItemFailAction\n  | NotFoundErrorAction;\n\ntype ThunkResult<R> = ThunkAction<R, AppState, undefined, FetchItemActions>;\n\nexport function fetchItemAction(itemId: string): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, FetchItemActions>) => {\n    Promise.resolve()\n      .then(() => {\n        dispatch(fetchItemStartAction());\n      })\n      .then(() => AppClient.get(`/items/${itemId}.json`))\n      .then(async (response: Response) => {\n        if (!response.ok) {\n          if (response.status === 404) {\n            throw new NotFoundError('Item not found');\n          }\n\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: GetItemRes) => {\n        dispatch(\n          fetchItemSuccessAction({\n            id: body.id,\n            status: body.status,\n            sellerId: body.seller_id,\n            seller: {\n              id: body.seller.id,\n              accountName: body.seller.account_name,\n              numSellItems: body.seller.num_sell_items,\n            },\n            buyerId: body.buyer_id,\n            buyer: body.buyer,\n            name: body.name,\n            price: body.price,\n            thumbnailUrl: body.image_url,\n            description: body.description,\n            category: {\n              id: body.category.id,\n              parentId: body.category.parent_id,\n              categoryName: body.category.category_name,\n              parentCategoryName: body.category.parent_category_name,\n            },\n            transactionEvidenceId: body.transaction_evidence_id,\n            transactionEvidenceStatus: body.transaction_evidence_status,\n            shippingStatus: body.shipping_status,\n            createdAt: body.created_at,\n          }),\n        );\n      })\n      .catch((err: Error) => {\n        if (err instanceof NotFoundError) {\n          dispatch(notFoundError());\n          return;\n        }\n\n        dispatch(\n          fetchItemFailAction({\n            error: err.message,\n          }),\n        );\n      });\n  };\n}\n\nexport interface FetchItemStartAction extends Action<typeof FETCH_ITEM_START> {}\n\nconst fetchItemStartAction = (): FetchItemStartAction => {\n  return {\n    type: FETCH_ITEM_START,\n  };\n};\n\nexport interface FetchItemSuccessAction\n  extends Action<typeof FETCH_ITEM_SUCCESS> {\n  payload: {\n    item: ItemData;\n  };\n}\n\nconst fetchItemSuccessAction = (item: ItemData): FetchItemSuccessAction => {\n  return {\n    type: FETCH_ITEM_SUCCESS,\n    payload: {\n      item,\n    },\n  };\n};\n\nexport interface FetchItemFailAction extends Action<typeof FETCH_ITEM_FAIL> {\n  payload: FormErrorState;\n}\n\nconst fetchItemFailAction = (newError: FormErrorState): FetchItemFailAction => {\n  return {\n    type: FETCH_ITEM_FAIL,\n    payload: newError,\n  };\n};\n","/**\n * HTTP client for payment service\n */\nclass PaymentClient {\n  private baseURL?: string;\n  private defaultHeaders: HeadersInit = {};\n\n  async post(path: string, params?: Object): Promise<Response> {\n    let requestOption: RequestInit = {\n      method: 'POST',\n      mode: 'cors',\n      headers: Object.assign({}, this.defaultHeaders, {\n        'Content-Type': 'application/json',\n      }),\n      credentials: 'same-origin',\n    };\n\n    if (params) {\n      requestOption.body = JSON.stringify(params);\n    }\n\n    return await fetch(`${this.baseURL}${path}`, requestOption);\n  }\n\n  public setBaseURL(baseURL: string) {\n    this.baseURL = baseURL;\n  }\n}\n\nexport default new PaymentClient();\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport { ErrorRes, SettingsRes } from '../types/appApiTypes';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { AppState } from '../index';\nimport { Settings } from '../dataObjects/settings';\nimport { UserData } from '../dataObjects/user';\nimport { CategorySimple } from '../dataObjects/category';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport PaymentClient from '../httpClients/paymentClient';\n\nexport const FETCH_SETTINGS_START = 'FETCH_SETTINGS_START';\nexport const FETCH_SETTINGS_SUCCESS = 'FETCH_SETTINGS_SUCCESS';\nexport const FETCH_SETTINGS_FAIL = 'FETCH_SETTINGS_FAIL';\n\nexport type SettingsActions =\n  | FetchSettingsStartAction\n  | FetchSettingsSuccessAction\n  | FetchSettingsFailAction;\ntype ThunkResult<R> = ThunkAction<R, AppState, undefined, SettingsActions>;\n\nexport function fetchSettings(): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, SettingsActions>) => {\n    Promise.resolve(() => {\n      dispatch(fetchSettingStartAction());\n    })\n      .then(() => AppClient.get(`/settings`))\n      .then(async (response: Response) => {\n        if (!response.ok) {\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: SettingsRes) => {\n        let user: UserData | undefined = undefined;\n\n        if (body.user) {\n          user = {\n            id: body.user.id,\n            accountName: body.user.account_name,\n            address: body.user.address,\n            numSellItems: body.user.num_sell_items,\n          };\n        }\n\n        dispatch(\n          fetchSettingsSuccessAction({\n            csrfToken: body.csrf_token,\n            categories: body.categories.map<CategorySimple>(category => ({\n              id: category.id,\n              parentId: category.parent_id,\n              categoryName: category.category_name,\n            })),\n            user: user,\n          }),\n        );\n\n        // MEMO: ここでやるのがいいかわからん\n        PaymentClient.setBaseURL(body.payment_service_url);\n      })\n      .catch((err: Error) => {\n        dispatch(\n          fetchItemPageFailAction({\n            error: err.message,\n          }),\n        );\n      });\n  };\n}\n\nexport interface FetchSettingsStartAction\n  extends Action<typeof FETCH_SETTINGS_START> {}\n\nconst fetchSettingStartAction = (): FetchSettingsStartAction => ({\n  type: 'FETCH_SETTINGS_START',\n});\n\nexport interface FetchSettingsSuccessAction\n  extends Action<typeof FETCH_SETTINGS_SUCCESS> {\n  payload: {\n    settings: Settings;\n  };\n}\n\nconst fetchSettingsSuccessAction = (\n  settings: Settings,\n): FetchSettingsSuccessAction => ({\n  type: 'FETCH_SETTINGS_SUCCESS',\n  payload: {\n    settings,\n  },\n});\n\nexport interface FetchSettingsFailAction\n  extends Action<typeof FETCH_SETTINGS_FAIL> {\n  payload: FormErrorState;\n}\n\nconst fetchItemPageFailAction = (\n  newError: FormErrorState,\n): FetchSettingsFailAction => ({\n  type: 'FETCH_SETTINGS_FAIL',\n  payload: newError,\n});\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport {\n  ErrorRes,\n  ItemDetail,\n  UserTransactionsReq,\n  UserTransactionsRes,\n} from '../types/appApiTypes';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { TransactionItem } from '../dataObjects/item';\nimport { NotFoundError } from '../errors/NotFoundError';\nimport { TransactionStatus } from '../dataObjects/transaction';\nimport { ShippingStatus } from '../dataObjects/shipping';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport { AppState } from '../index';\n\nexport const FETCH_TRANSACTIONS_START = 'FETCH_TRANSACTIONS_START';\nexport const FETCH_TRANSACTIONS_SUCCESS = 'FETCH_TRANSACTIONS_SUCCESS';\nexport const FETCH_TRANSACTIONS_FAIL = 'FETCH_TRANSACTIONS_FAIL';\n\nexport type FetchTransactionActions =\n  | FetchTransactionsStartAction\n  | FetchTransactionsSuccessAction\n  | FetchTransactionsFailAction;\ntype ThunkResult<R> = ThunkAction<\n  R,\n  AppState,\n  undefined,\n  FetchTransactionActions\n>;\n\nexport function fetchTransactionsAction(\n  itemId?: number,\n  createdAt?: number,\n): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, FetchTransactionActions>) => {\n    Promise.resolve()\n      .then(() => {\n        dispatch(fetchTransactionsStartAction());\n      })\n      .then(() => {\n        return AppClient.get('/users/transactions.json', {\n          item_id: itemId,\n          created_at: createdAt,\n        } as UserTransactionsReq);\n      })\n      .then(async (response: Response) => {\n        if (!response.ok) {\n          if (response.status === 404) {\n            throw new NotFoundError('Transactions not found');\n          }\n\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: UserTransactionsRes) => {\n        dispatch(\n          fetchTransactionsSuccessAction({\n            items: body.items.map((item: ItemDetail) => ({\n              id: item.id,\n              status: item.status,\n              transactionEvidenceStatus: item.transaction_evidence_status as TransactionStatus, // MEMO API will return this value for this endpoint\n              shippingStatus: item.shipping_status as ShippingStatus, // MEMO API will return this value for this endpoint\n              name: item.name,\n              thumbnailUrl: item.image_url,\n              createdAt: item.created_at,\n            })),\n            hasNext: body.has_next,\n          }),\n        );\n      })\n      .catch((err: Error) => {\n        dispatch(\n          fetchTransactionsFailAction({\n            error: err.message,\n          }),\n        );\n      });\n  };\n}\n\nexport interface FetchTransactionsStartAction\n  extends Action<typeof FETCH_TRANSACTIONS_START> {}\n\nconst fetchTransactionsStartAction = (): FetchTransactionsStartAction => {\n  return {\n    type: FETCH_TRANSACTIONS_START,\n  };\n};\n\nexport interface FetchTransactionsSuccessAction\n  extends Action<typeof FETCH_TRANSACTIONS_SUCCESS> {\n  payload: {\n    items: TransactionItem[];\n    hasNext: boolean;\n  };\n}\n\nconst fetchTransactionsSuccessAction = (payload: {\n  items: TransactionItem[];\n  hasNext: boolean;\n}): FetchTransactionsSuccessAction => {\n  return {\n    type: FETCH_TRANSACTIONS_SUCCESS,\n    payload,\n  };\n};\n\nexport interface FetchTransactionsFailAction\n  extends Action<typeof FETCH_TRANSACTIONS_FAIL> {\n  payload: FormErrorState;\n}\n\nconst fetchTransactionsFailAction = (\n  newErrors: FormErrorState,\n): FetchTransactionsFailAction => {\n  return {\n    type: FETCH_TRANSACTIONS_FAIL,\n    payload: newErrors,\n  };\n};\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport {\n  ErrorRes,\n  ItemSimple,\n  UserItemsReq,\n  UserItemsRes,\n} from '../types/appApiTypes';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { TimelineItem } from '../dataObjects/item';\nimport { NotFoundError } from '../errors/NotFoundError';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport { AppState } from '../index';\n\nexport const FETCH_USER_ITEMS_START = 'FETCH_USER_ITEMS_START';\nexport const FETCH_USER_ITEMS_SUCCESS = 'FETCH_USER_ITEMS_SUCCESS';\nexport const FETCH_USER_ITEMS_FAIL = 'FETCH_USER_ITEMS_FAIL';\n\nexport type FetchUserItemsActions =\n  | FetchUserItemsStartAction\n  | FetchUserItemsSuccessAction\n  | FetchUserItemsFailAction;\ntype ThunkResult<R> = ThunkAction<\n  R,\n  AppState,\n  undefined,\n  FetchUserItemsActions\n>;\n\nexport function fetchUserItemsAction(\n  userId: number,\n  itemId?: number,\n  createdAt?: number,\n): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, FetchUserItemsActions>) => {\n    Promise.resolve()\n      .then(() => {\n        dispatch(fetchUserItemsStartAction());\n      })\n      .then(() => {\n        return AppClient.get(`/users/${userId}.json`, {\n          item_id: itemId,\n          created_at: createdAt,\n        } as UserItemsReq);\n      })\n      .then(async (response: Response) => {\n        if (!response.ok) {\n          if (response.status === 404) {\n            throw new NotFoundError('UserItems not found');\n          }\n\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: UserItemsRes) => {\n        dispatch(\n          fetchUserItemsSuccessAction({\n            items: body.items.map((item: ItemSimple) => ({\n              id: item.id,\n              status: item.status,\n              name: item.name,\n              price: item.price,\n              thumbnailUrl: item.image_url,\n              createdAt: item.created_at,\n            })),\n            hasNext: body.has_next,\n          }),\n        );\n      })\n      .catch((err: Error) => {\n        dispatch(\n          fetchUserItemsFailAction({\n            error: err.message,\n          }),\n        );\n      });\n  };\n}\n\nexport interface FetchUserItemsStartAction\n  extends Action<typeof FETCH_USER_ITEMS_START> {}\n\nconst fetchUserItemsStartAction = (): FetchUserItemsStartAction => {\n  return {\n    type: FETCH_USER_ITEMS_START,\n  };\n};\n\nexport interface FetchUserItemsSuccessAction\n  extends Action<typeof FETCH_USER_ITEMS_SUCCESS> {\n  payload: {\n    items: TimelineItem[];\n    hasNext: boolean;\n  };\n}\n\nconst fetchUserItemsSuccessAction = (payload: {\n  items: TimelineItem[];\n  hasNext: boolean;\n}): FetchUserItemsSuccessAction => {\n  return {\n    type: FETCH_USER_ITEMS_SUCCESS,\n    payload,\n  };\n};\n\nexport interface FetchUserItemsFailAction\n  extends Action<typeof FETCH_USER_ITEMS_FAIL> {\n  payload: FormErrorState;\n}\n\nconst fetchUserItemsFailAction = (\n  newError: FormErrorState,\n): FetchUserItemsFailAction => {\n  return {\n    type: FETCH_USER_ITEMS_FAIL,\n    payload: newError,\n  };\n};\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport {\n  ErrorRes,\n  ItemDetail,\n  ItemSimple,\n  UserItemsRes,\n  UserTransactionsRes,\n} from '../types/appApiTypes';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { TimelineItem, TransactionItem } from '../dataObjects/item';\nimport { UserData } from '../dataObjects/user';\nimport { ShippingStatus } from '../dataObjects/shipping';\nimport { TransactionStatus } from '../dataObjects/transaction';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport { AppState } from '../index';\nimport { NotFoundError } from '../errors/NotFoundError';\nimport { notFoundError, NotFoundErrorAction } from './errorAction';\n\nexport const FETCH_USER_PAGE_DATA_START = 'FETCH_USER_PAGE_DATA_START';\nexport const FETCH_USER_PAGE_DATA_SUCCESS = 'FETCH_USER_PAGE_DATA_SUCCESS';\nexport const FETCH_USER_PAGE_DATA_FAIL = 'FETCH_USER_PAGE_DATA_FAIL';\n\nexport type FetchUserPageDataActions =\n  | FetchUserPageDataStartAction\n  | FetchUserPageDataSuccessAction\n  | FetchUserPageDataFailAction\n  | NotFoundErrorAction;\ntype ThunkResult<R> = ThunkAction<\n  R,\n  AppState,\n  undefined,\n  FetchUserPageDataActions\n>;\n\nasync function fetchUserPageData(\n  userId: number,\n  isMyPage: boolean,\n): Promise<[UserItemsRes, UserTransactionsRes | undefined]> {\n  const userDataRes: Response = await AppClient.get(`/users/${userId}.json`);\n\n  if (!userDataRes.ok) {\n    const errRes: ErrorRes = await userDataRes.json();\n\n    if (userDataRes.status === 404) {\n      throw new NotFoundError(errRes.error);\n    }\n\n    throw new AppResponseError(errRes.error, userDataRes);\n  }\n\n  const userData: UserItemsRes = await userDataRes.json();\n\n  let transactions: UserTransactionsRes | undefined;\n\n  if (isMyPage) {\n    const transactionRes: Response = await AppClient.get(\n      '/users/transactions.json',\n    );\n\n    if (!transactionRes.ok) {\n      const errRes: ErrorRes = await userDataRes.json();\n      throw new AppResponseError(errRes.error, transactionRes);\n    }\n\n    transactions = await transactionRes.json();\n  }\n\n  return [userData, transactions];\n}\n\nexport function fetchUserPageDataAction(\n  userId: number,\n  isMyPage: boolean,\n): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, FetchUserPageDataActions>) => {\n    Promise.resolve()\n      .then(() => {\n        dispatch(fetchUserPageDataStartAction());\n      })\n      .then(() => {\n        return fetchUserPageData(userId, isMyPage);\n      })\n      .then((res: [UserItemsRes, UserTransactionsRes | undefined]) => {\n        const userPageData = res[0];\n        const payload = {\n          user: {\n            id: userPageData.user.id,\n            accountName: userPageData.user.account_name,\n            numSellItems: userPageData.user.num_sell_items,\n          },\n          items: userPageData.items.map((item: ItemSimple) => ({\n            id: item.id,\n            status: item.status,\n            name: item.name,\n            price: item.price,\n            thumbnailUrl: item.image_url,\n            createdAt: item.created_at,\n          })),\n          itemsHasNext: userPageData.has_next,\n        };\n        let transactions: {\n          transactions: TransactionItem[];\n          transactionsHasNext: boolean;\n        } = {\n          transactions: [],\n          transactionsHasNext: false,\n        };\n\n        if (isMyPage && res[1] !== undefined) {\n          const transactionRes: UserTransactionsRes = res[1];\n          transactions = {\n            transactions: transactionRes.items.map((item: ItemDetail) => ({\n              id: item.id,\n              status: item.status,\n              transactionEvidenceStatus: item.transaction_evidence_status as TransactionStatus, // MEMO API will return this value for this endpoint\n              shippingStatus: item.shipping_status as ShippingStatus, // MEMO API will return this value for this endpoint\n              name: item.name,\n              thumbnailUrl: item.image_url,\n              createdAt: item.created_at,\n            })),\n            transactionsHasNext: transactionRes.has_next,\n          };\n        }\n\n        dispatch(\n          fetchUserPageDataSuccessAction({ ...payload, ...transactions }),\n        );\n      })\n      .catch((err: Error) => {\n        if (err instanceof NotFoundError) {\n          dispatch(notFoundError());\n        }\n\n        dispatch(\n          fetchUserPageDataFailAction({\n            error: err.message,\n          }),\n        );\n      });\n  };\n}\n\nexport interface FetchUserPageDataStartAction\n  extends Action<typeof FETCH_USER_PAGE_DATA_START> {}\n\nconst fetchUserPageDataStartAction = (): FetchUserPageDataStartAction => {\n  return {\n    type: FETCH_USER_PAGE_DATA_START,\n  };\n};\n\nexport interface FetchUserPageDataSuccessAction\n  extends Action<typeof FETCH_USER_PAGE_DATA_SUCCESS> {\n  payload: {\n    user: UserData;\n    items: TimelineItem[];\n    itemsHasNext: boolean;\n    transactions: TransactionItem[];\n    transactionsHasNext: boolean;\n  };\n}\n\nconst fetchUserPageDataSuccessAction = (payload: {\n  user: UserData;\n  items: TimelineItem[];\n  itemsHasNext: boolean;\n  transactions: TransactionItem[];\n  transactionsHasNext: boolean;\n}): FetchUserPageDataSuccessAction => {\n  return {\n    type: FETCH_USER_PAGE_DATA_SUCCESS,\n    payload,\n  };\n};\n\nexport interface FetchUserPageDataFailAction\n  extends Action<typeof FETCH_USER_PAGE_DATA_FAIL> {\n  payload: FormErrorState;\n}\n\nconst fetchUserPageDataFailAction = (\n  newError: FormErrorState,\n): FetchUserPageDataFailAction => {\n  return {\n    type: FETCH_USER_PAGE_DATA_FAIL,\n    payload: newError,\n  };\n};\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport {\n  ErrorRes,\n  ItemSimple,\n  NewCategoryItemRes,\n  NewItemReq,\n  NewItemRes,\n} from '../types/appApiTypes';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { TimelineItem } from '../dataObjects/item';\nimport { NotFoundError } from '../errors/NotFoundError';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport { AppState } from '../index';\n\nexport const FETCH_TIMELINE_START = 'FETCH_TIMELINE_START';\nexport const FETCH_TIMELINE_SUCCESS = 'FETCH_TIMELINE_SUCCESS';\nexport const FETCH_TIMELINE_FAIL = 'FETCH_TIMELINE_FAIL';\n\nexport type FetchTimelineActions =\n  | FetchTimelineStartAction\n  | FetchTimelineSuccessAction\n  | FetchTimelineFailAction;\ntype ThunkResult<R> = ThunkAction<R, AppState, undefined, FetchTimelineActions>;\n\nexport function fetchTimelineAction(\n  createdAt?: number,\n  itemId?: number,\n  categoryId?: number,\n): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, FetchTimelineActions>) => {\n    Promise.resolve()\n      .then(() => {\n        dispatch(fetchTimelineStartAction());\n      })\n      .then(() => {\n        let getParams: NewItemReq = {\n          item_id: itemId,\n          created_at: createdAt,\n        };\n\n        if (categoryId) {\n          return AppClient.get(`/new_items/${categoryId}.json`, getParams);\n        }\n\n        return AppClient.get(`/new_items.json`, getParams);\n      })\n      .then(async (response: Response) => {\n        if (!response.ok) {\n          if (response.status === 404) {\n            throw new NotFoundError('Item not found');\n          }\n\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: NewItemRes | NewCategoryItemRes) => {\n        dispatch(\n          fetchTimelineSuccessAction({\n            items: body.items.map((item: ItemSimple) => ({\n              id: item.id,\n              status: item.status,\n              name: item.name,\n              price: item.price,\n              thumbnailUrl: item.image_url,\n              createdAt: item.created_at,\n            })),\n            hasNext: body.has_next,\n            categoryId: body.root_category_id,\n            categoryName: body.root_category_name,\n          }),\n        );\n      })\n      .catch((err: Error) => {\n        dispatch(\n          fetchTimelineFailAction({\n            error: err.message,\n          }),\n        );\n      });\n  };\n}\n\nexport interface FetchTimelineStartAction\n  extends Action<typeof FETCH_TIMELINE_START> {}\n\nconst fetchTimelineStartAction = (): FetchTimelineStartAction => {\n  return {\n    type: FETCH_TIMELINE_START,\n  };\n};\n\nexport interface FetchTimelineSuccessAction\n  extends Action<typeof FETCH_TIMELINE_SUCCESS> {\n  payload: {\n    items: TimelineItem[];\n    hasNext: boolean;\n    categoryId?: number;\n    categoryName?: string;\n  };\n}\n\nconst fetchTimelineSuccessAction = (payload: {\n  items: TimelineItem[];\n  hasNext: boolean;\n  categoryId?: number;\n  categoryName?: string;\n}): FetchTimelineSuccessAction => {\n  return {\n    type: FETCH_TIMELINE_SUCCESS,\n    payload,\n  };\n};\n\nexport interface FetchTimelineFailAction\n  extends Action<typeof FETCH_TIMELINE_FAIL> {\n  payload: FormErrorState;\n}\n\nconst fetchTimelineFailAction = (\n  newErrors: FormErrorState,\n): FetchTimelineFailAction => {\n  return {\n    type: FETCH_TIMELINE_FAIL,\n    payload: newErrors,\n  };\n};\n","import { INTERNAL_SERVER_ERROR, NOT_FOUND_ERROR } from '../actions/errorAction';\nimport { FETCH_ITEM_FAIL } from '../actions/fetchItemAction';\nimport { FETCH_SETTINGS_FAIL } from '../actions/settingsAction';\nimport { FETCH_TRANSACTIONS_FAIL } from '../actions/fetchTransactionsAction';\nimport { FETCH_USER_ITEMS_FAIL } from '../actions/fetchUserItemsAction';\nimport { FETCH_USER_PAGE_DATA_FAIL } from '../actions/fetchUserPageDataAction';\nimport { FETCH_TIMELINE_FAIL } from '../actions/fetchTimelineAction';\nimport { ActionTypes } from '../actions/actionTypes';\n\nexport const NoError = 'NO_ERROR';\nexport const NotFoundError = 'NOT_FOUND';\nexport const InternalServerError = 'INTERNAL_SERVER_ERROR';\nexport type ErrorType =\n  | typeof NoError\n  | typeof NotFoundError\n  | typeof InternalServerError;\n\nexport interface ErrorState {\n  errorType: ErrorType;\n  errorCode?: number;\n}\n\nconst initialState: ErrorState = {\n  errorType: NoError,\n};\n\nconst error = (\n  state: ErrorState = initialState,\n  action: ActionTypes,\n): ErrorState => {\n  switch (action.type) {\n    case NOT_FOUND_ERROR:\n      return { errorType: NotFoundError, errorCode: 404 };\n    case INTERNAL_SERVER_ERROR:\n    case FETCH_ITEM_FAIL:\n    case FETCH_TIMELINE_FAIL:\n    case FETCH_TRANSACTIONS_FAIL:\n    case FETCH_USER_ITEMS_FAIL:\n    case FETCH_USER_PAGE_DATA_FAIL:\n    case FETCH_SETTINGS_FAIL:\n      return { errorType: InternalServerError, errorCode: 500 };\n    default:\n      return { errorType: NoError };\n  }\n};\n\nexport default error;\n","import React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { MuiThemeProvider, Theme } from '@material-ui/core';\nimport { themeInstance } from '../../../theme';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from 'react-router-dom';\nimport { routes } from '../../../routes/Route';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  container: {\n    paddingTop: theme.spacing(2),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  img: {\n    width: '70%',\n  },\n  message: {\n    paddingTop: theme.spacing(1),\n  },\n  link: {\n    paddingTop: theme.spacing(2),\n  },\n}));\n\nexport type Props = {\n  message?: string;\n};\n\nconst NotFoundPage: React.FC<Props> = ({ message }) => {\n  const classes = useStyles();\n\n  return (\n    <MuiThemeProvider theme={themeInstance}>\n      <Container maxWidth=\"md\" className={classes.container}>\n        <img className={classes.img} src={'/not_found.png'} alt={'not found'} />\n        <Typography variant=\"h3\">404 Not Found</Typography>\n        {message && (\n          <Typography variant=\"h4\" className={classes.message}>\n            {message}\n          </Typography>\n        )}\n        <Link to={routes.top.path}>\n          <Typography variant=\"h6\" className={classes.link}>\n            トップページへ\n          </Typography>\n        </Link>\n      </Container>\n    </MuiThemeProvider>\n  );\n};\n\nexport { NotFoundPage };\n","import React from 'react';\nimport { MuiThemeProvider, Theme } from '@material-ui/core';\nimport { themeInstance } from '../../../theme';\nimport Container from '@material-ui/core/Container';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from 'react-router-dom';\nimport { routes } from '../../../routes/Route';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  container: {\n    paddingTop: theme.spacing(2),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  img: {\n    width: '70%',\n  },\n  message: {\n    paddingTop: theme.spacing(1),\n  },\n  link: {\n    paddingTop: theme.spacing(2),\n  },\n}));\n\nexport type Props = {\n  message?: string;\n};\n\nconst InternalServerErrorPage: React.FC<Props> = ({ message }) => {\n  const classes = useStyles();\n\n  return (\n    <MuiThemeProvider theme={themeInstance}>\n      <Container maxWidth=\"md\" className={classes.container}>\n        <img\n          className={classes.img}\n          src={'/internal_server_error.png'}\n          alt={'not found'}\n        />\n        <Typography variant=\"h3\">Internal Server Error</Typography>\n        {message && (\n          <Typography variant=\"h4\" className={classes.message}>\n            {message}\n          </Typography>\n        )}\n        <Link to={routes.top.path}>\n          <Typography variant=\"h6\" className={classes.link}>\n            トップページへ\n          </Typography>\n        </Link>\n      </Container>\n    </MuiThemeProvider>\n  );\n};\n\nexport { InternalServerErrorPage };\n","import {\n  ErrorType,\n  InternalServerError,\n  NotFoundError,\n} from '../reducers/errorReducer';\nimport { branch, renderComponent, withProps, compose } from 'recompose';\nimport { NotFoundPage } from '../pages/error/NotFoundPage';\nimport { InternalServerErrorPage } from '../pages/error/InternalServerErrorPage';\n\nexport interface ErrorProps {\n  errorType: ErrorType;\n}\n\ntype BaseProps = ErrorProps;\n\nexport const PageComponentWithError = <Props extends ErrorProps>() =>\n  compose<Props, Props>(\n    withProps((props: Props) => ({\n      errorType: props.errorType,\n    })),\n    branch<BaseProps>(\n      (props: BaseProps) => props.errorType === NotFoundError,\n      renderComponent(NotFoundPage),\n    ),\n    branch<BaseProps>(\n      (props: BaseProps) => props.errorType === InternalServerError,\n      renderComponent(InternalServerErrorPage),\n    ),\n  );\n","import React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core';\nimport SellFormContainer from '../containers/SellFormContainer';\nimport { ErrorProps, PageComponentWithError } from '../hoc/withBaseComponent';\nimport BasePageContainer from '../containers/BasePageContainer';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  paper: {\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n}));\n\ntype Props = {} & ErrorProps;\n\nconst SellPage: React.FC<Props> = () => {\n  const classes = useStyles();\n\n  return (\n    <BasePageContainer>\n      <div className={classes.paper}>\n        <SellFormContainer />\n      </div>\n    </BasePageContainer>\n  );\n};\n\nexport default PageComponentWithError<Props>()(SellPage);\n","import { AppBar, Theme } from '@material-ui/core';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport Grid from '@material-ui/core/Grid';\nimport * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  appBar: {\n    top: 'auto',\n    bottom: 0,\n    padding: theme.spacing(0, 2),\n  },\n  buyButton: {\n    margin: theme.spacing(1),\n  },\n}));\n\ntype Props = {\n  price: number;\n  buttons: {\n    onClick: (e: React.MouseEvent) => void;\n    buttonText: string;\n    disabled: boolean;\n  }[];\n};\n\nconst ItemFooter: React.FC<Props> = ({ price, buttons }) => {\n  const classes = useStyles();\n\n  return (\n    <AppBar color=\"primary\" position=\"fixed\" className={classes.appBar}>\n      <Grid\n        container\n        spacing={2}\n        direction=\"row\"\n        justify=\"space-between\"\n        alignItems=\"center\"\n      >\n        <Grid item>\n          <Typography variant=\"h5\">{price}ｲｽｺｲﾝ</Typography>\n        </Grid>\n        <Grid item>\n          <Grid container direction=\"row\">\n            {buttons.map(button => {\n              return (\n                <Grid item>\n                  <Button\n                    variant=\"contained\"\n                    className={classes.buyButton}\n                    color=\"secondary\"\n                    onClick={button.onClick}\n                    disabled={button.disabled}\n                  >\n                    {button.buttonText}\n                  </Button>\n                </Grid>\n              );\n            })}\n          </Grid>\n        </Grid>\n      </Grid>\n    </AppBar>\n  );\n};\n\nexport { ItemFooter };\n","import React from 'react';\nimport Card from '@material-ui/core/Card';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { Theme } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\n\nconst getUserStyles = (width: number) =>\n  makeStyles((theme: Theme) => ({\n    card: {\n      width: `${width}px`,\n      position: 'relative',\n    },\n    itemImage: {\n      width: `${width}px`,\n      height: 'auto',\n    },\n    soldOut: {\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      zIndex: 1,\n      width: 0,\n      height: 0,\n      borderStyle: 'solid',\n      borderWidth: `0 140px 140px 0`,\n      borderColor: 'transparent #ff0000 transparent transparent;',\n    },\n    soldOutText: {\n      position: 'absolute',\n      top: '35px',\n      right: '1px',\n      fontWeight: theme.typography.fontWeightBold,\n      zIndex: 2,\n      transform: 'rotate(45deg);',\n      color: theme.palette.primary.contrastText,\n    },\n  }));\n\ninterface Props {\n  imageUrl: string;\n  title: string;\n  isSoldOut: boolean;\n  width: number;\n}\n\nconst ItemImage: React.FC<Props> = ({ imageUrl, title, isSoldOut, width }) => {\n  const classes = getUserStyles(width)();\n\n  return (\n    <Card className={classes.card}>\n      {isSoldOut && (\n        <React.Fragment>\n          <div className={classes.soldOut} />\n          <Typography className={classes.soldOutText} variant=\"h6\">\n            SOLD OUT\n          </Typography>\n        </React.Fragment>\n      )}\n      <img className={classes.itemImage} src={imageUrl} alt={title} />\n    </Card>\n  );\n};\n\nexport { ItemImage };\n","import React from 'react';\nimport { ItemData } from '../dataObjects/item';\nimport { createStyles, Theme, Typography, WithStyles } from '@material-ui/core';\nimport Grid from '@material-ui/core/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport Avatar from '@material-ui/core/Avatar';\nimport { Link as RouteLink, RouteComponentProps } from 'react-router-dom';\nimport { routes } from '../routes/Route';\nimport { StyleRules } from '@material-ui/core/styles';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { ErrorProps, PageComponentWithError } from '../hoc/withBaseComponent';\nimport BasePageContainer from '../containers/BasePageContainer';\nimport LoadingComponent from '../components/LoadingComponent';\nimport { ItemFooter } from '../components/ItemFooter';\nimport { ItemImage } from '../components/ItemImage';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      marginBottom: theme.spacing(10),\n    },\n    title: {\n      margin: theme.spacing(3),\n    },\n    avatar: {\n      width: '50px',\n      height: '50px',\n    },\n    divider: {\n      margin: theme.spacing(1),\n    },\n    descSection: {\n      marginTop: theme.spacing(3),\n      marginBottom: theme.spacing(3),\n    },\n    link: {\n      textDecoration: 'none',\n    },\n  });\n\ninterface ItemPageProps extends WithStyles<typeof styles> {\n  loading: boolean;\n  item: ItemData;\n  viewer: {\n    userId: number;\n  };\n  load: (itemId: string) => void;\n  onClickBuy: (itemId: number) => void;\n  onClickItemEdit: (itemId: number) => void;\n  onClickBump: (itemId: number) => void;\n  onClickTransaction: (itemId: number) => void;\n}\n\ntype Props = ItemPageProps &\n  RouteComponentProps<{ item_id: string }> &\n  ErrorProps;\n\nclass ItemPage extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    this.props.load(this.props.match.params.item_id);\n    this._onClickBuyButton = this._onClickBuyButton.bind(this);\n    this._onClickItemEditButton = this._onClickItemEditButton.bind(this);\n    this._onClickBumpButton = this._onClickBumpButton.bind(this);\n    this._onClickTransaction = this._onClickTransaction.bind(this);\n  }\n\n  _onClickBuyButton(e: React.MouseEvent) {\n    e.preventDefault();\n    this.props.onClickBuy(this.props.item.id);\n  }\n\n  _onClickItemEditButton(e: React.MouseEvent) {\n    e.preventDefault();\n    this.props.onClickItemEdit(this.props.item.id);\n  }\n\n  _onClickBumpButton(e: React.MouseEvent) {\n    e.preventDefault();\n    this.props.onClickBump(this.props.item.id);\n  }\n\n  _onClickTransaction(e: React.MouseEvent) {\n    e.preventDefault();\n    this.props.onClickTransaction(this.props.item.id);\n  }\n\n  render() {\n    const { classes, item, loading, viewer } = this.props;\n\n    if (loading) {\n      return <LoadingComponent />;\n    }\n\n    let buttons: {\n      onClick: (e: React.MouseEvent) => void;\n      buttonText: string;\n      disabled: boolean;\n    }[] = [\n      {\n        onClick: this._onClickBuyButton,\n        buttonText: '購入',\n        disabled: false,\n      },\n    ];\n\n    // 自分の商品で出品中なら編集画面へ遷移 / Bumpボタンを表示\n    if (viewer.userId === item.sellerId && item.status === 'on_sale') {\n      buttons = [\n        {\n          onClick: this._onClickBumpButton,\n          buttonText: 'Bump',\n          disabled: false,\n        },\n        {\n          onClick: this._onClickItemEditButton,\n          buttonText: '商品編集',\n          disabled: false,\n        },\n      ];\n    }\n\n    // 出品者 or 購入者で取引中か売り切れなら取引画面へのボタンを追加\n    if (\n      (viewer.userId === item.sellerId || viewer.userId === item.buyerId) &&\n      (item.status === 'trading' || item.status === 'sold_out')\n    ) {\n      buttons = [\n        {\n          onClick: this._onClickTransaction,\n          buttonText: '取引画面',\n          disabled: false,\n        },\n      ];\n    }\n\n    // 商品が出品中でなく、出品者でも購入者でもない場合は売り切れ\n    if (\n      item.status !== 'on_sale' &&\n      viewer.userId !== item.sellerId &&\n      viewer.userId !== item.buyerId\n    ) {\n      buttons = [\n        {\n          onClick(e: React.MouseEvent) {},\n          buttonText: '売り切れ',\n          disabled: true,\n        },\n      ];\n    }\n\n    return (\n      <BasePageContainer>\n        <div className={classes.root}>\n          <Typography className={classes.title} variant=\"h3\">\n            {item.name}\n          </Typography>\n          <Grid container spacing={2}>\n            <Grid item>\n              <ItemImage\n                imageUrl={item.thumbnailUrl}\n                title={item.name}\n                isSoldOut={item.status !== 'on_sale'}\n                width={500}\n              />\n            </Grid>\n            <Grid item xs={12} sm container>\n              <Grid item xs container direction=\"column\" spacing={2}>\n                <Grid item xs>\n                  <div className={classes.descSection}>\n                    <Typography variant=\"h4\">商品説明</Typography>\n                    <Divider className={classes.divider} variant=\"middle\" />\n                    <Typography variant=\"body1\">{item.description}</Typography>\n                  </div>\n\n                  <div className={classes.descSection}>\n                    <Typography variant=\"h4\">カテゴリ</Typography>\n                    <Divider className={classes.divider} variant=\"middle\" />\n                    <Typography variant=\"body1\">\n                      <RouteLink\n                        to={routes.categoryTimeline.getPath(\n                          item.category.parentId,\n                        )}\n                      >\n                        {item.category.parentCategoryName}\n                      </RouteLink>{' '}\n                      > {item.category.categoryName}\n                    </Typography>\n                  </div>\n\n                  <div className={classes.descSection}>\n                    <Typography variant=\"h4\">出品者</Typography>\n                    <Divider className={classes.divider} variant=\"middle\" />\n                    <Grid\n                      container\n                      direction=\"row\"\n                      justify=\"center\"\n                      alignItems=\"center\"\n                      wrap=\"nowrap\"\n                      spacing={2}\n                    >\n                      <Grid item>\n                        <RouteLink\n                          className={classes.link}\n                          to={routes.user.getPath(item.sellerId)}\n                        >\n                          <Avatar className={classes.avatar}>\n                            {item.seller.accountName.charAt(0)}\n                          </Avatar>\n                        </RouteLink>\n                      </Grid>\n                      <Grid item xs>\n                        <Typography variant=\"body1\">\n                          {item.seller.accountName}\n                        </Typography>\n                      </Grid>\n                    </Grid>\n                  </div>\n                </Grid>\n              </Grid>\n            </Grid>\n          </Grid>\n        </div>\n        <ItemFooter price={item.price} buttons={buttons} />\n      </BasePageContainer>\n    );\n  }\n}\n\nexport default PageComponentWithError<any>()(withStyles(styles)(ItemPage));\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport { Action } from 'redux';\nimport { ErrorRes, BumpReq, BumpRes } from '../types/appApiTypes';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { AppState } from '../index';\n\nexport const POST_BUMP_START = 'POST_BUMP_START';\nexport const POST_BUMP_SUCCESS = 'POST_BUMP_SUCCESS';\nexport const POST_BUMP_FAIL = 'POST_BUMP_FAIL';\n\nexport type PostBumpActions =\n  | PostBumpStartAction\n  | PostBumpSuccessAction\n  | PostBumpFailAction;\n\ntype ThunkResult<R> = ThunkAction<R, AppState, undefined, PostBumpActions>;\n\nexport function postBumpAction(itemId: number): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, PostBumpActions>) => {\n    Promise.resolve()\n      .then(() => {\n        dispatch(postBumpStartAction());\n      })\n      .then(() => {\n        return AppClient.post('/bump', { item_id: itemId } as BumpReq);\n      })\n      .then(async (response: Response) => {\n        if (response.status !== 200) {\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: BumpRes) => {\n        dispatch(postBumpSuccessAction());\n      })\n      .catch((err: Error) => {\n        dispatch(\n          postBumpFailAction({\n            error: err.message, // TODO\n          }),\n        );\n      });\n  };\n}\n\nexport interface PostBumpStartAction extends Action<typeof POST_BUMP_START> {}\n\nexport function postBumpStartAction(): PostBumpStartAction {\n  return {\n    type: POST_BUMP_START,\n  };\n}\n\nexport interface PostBumpSuccessAction\n  extends Action<typeof POST_BUMP_SUCCESS> {}\n\nexport function postBumpSuccessAction(): PostBumpSuccessAction {\n  return {\n    type: POST_BUMP_SUCCESS,\n  };\n}\n\nexport interface PostBumpFailAction extends Action<typeof POST_BUMP_FAIL> {\n  payload: FormErrorState;\n}\n\nexport function postBumpFailAction(\n  newErrors: FormErrorState,\n): PostBumpFailAction {\n  return {\n    type: POST_BUMP_FAIL,\n    payload: newErrors,\n  };\n}\n","import { connect } from 'react-redux';\nimport ItemPage from '../pages/ItemPage';\nimport { fetchItemAction } from '../actions/fetchItemAction';\nimport { AppState } from '../index';\nimport { push } from 'connected-react-router';\nimport { routes } from '../routes/Route';\nimport { postBumpAction } from '../actions/postBumpAction';\n\nconst mapStateToProps = (state: AppState) => ({\n  loading: state.page.isItemLoading,\n  item: state.viewingItem.item,\n  viewer: {\n    userId: state.authStatus.userId || 0,\n  },\n  errorType: state.error.errorType,\n});\nconst mapDispatchToProps = (dispatch: any) => ({\n  load: (itemId: string) => {\n    dispatch(fetchItemAction(itemId));\n  },\n  onClickBuy: (itemId: number) => {\n    dispatch(push(routes.buy.getPath(itemId)));\n  },\n  onClickItemEdit: (itemId: number) => {\n    dispatch(push(routes.itemEdit.getPath(itemId)));\n  },\n  onClickBump: (itemId: number) => {\n    dispatch(postBumpAction(itemId));\n  },\n  onClickTransaction: (itemId: number) => {\n    dispatch(push(routes.transaction.getPath(itemId)));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ItemPage);\n","import React from 'react';\nimport Card from '@material-ui/core/Card';\nimport { Link as RouteLink } from 'react-router-dom';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { routes } from '../../routes/Route';\nimport { Theme } from '@material-ui/core';\nimport { ItemStatus } from '../../dataObjects/item';\nimport { ItemImage } from '../ItemImage';\nimport GridListTile from '@material-ui/core/GridListTile';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  card: {\n    width: '300px',\n    position: 'relative',\n  },\n}));\n\ninterface Props {\n  itemId: number;\n  imageUrl: string;\n  title: string;\n  price: number;\n  status: ItemStatus;\n}\n\nconst Item: React.FC<Props> = ({ itemId, imageUrl, title, price, status }) => {\n  const classes = useStyles();\n\n  return (\n    <RouteLink to={routes.item.getPath(itemId)}>\n      <Card className={classes.card}>\n        <GridListTile>\n          <ItemImage\n            imageUrl={imageUrl}\n            title={title}\n            isSoldOut={status !== 'on_sale'}\n            width={300}\n          />\n          <GridListTileBar title={title} subtitle={`${price}ｲｽｺｲﾝ`} />\n        </GridListTile>\n      </Card>\n    </RouteLink>\n  );\n};\n\nexport { Item };\n","import React from 'react';\nimport { TimelineItem } from '../../dataObjects/item';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport GridList from '@material-ui/core/GridList';\nimport { Item } from '../Item';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport CircularProgress from '@material-ui/core/CircularProgress/CircularProgress';\nimport { Theme } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  gridList: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    justifyContent: 'flex-start',\n  },\n  grid: {\n    height: '100%',\n  },\n}));\n\nexport interface Props {\n  items: TimelineItem[];\n  hasNext: boolean;\n  loadMore: (page: number) => void;\n}\n\nconst ItemList: React.FC<Props> = function({\n  items,\n  hasNext,\n  loadMore,\n}: Props) {\n  const classes = useStyles();\n\n  const itemComponents = [];\n\n  for (const item of items) {\n    itemComponents.push(\n      <GridListTile className={classes.grid} key={item.id}>\n        <Item\n          itemId={item.id}\n          imageUrl={item.thumbnailUrl}\n          title={item.name}\n          price={item.price}\n          status={item.status}\n        />\n      </GridListTile>,\n    );\n  }\n\n  return (\n    <InfiniteScroll\n      pageStart={0}\n      loadMore={loadMore}\n      hasMore={hasNext}\n      loader={<CircularProgress />}\n    >\n      <GridList className={classes.gridList} cellHeight=\"auto\" cols={3}>\n        {itemComponents}\n      </GridList>\n    </InfiniteScroll>\n  );\n};\n\nexport { ItemList };\n","import React from 'react';\nimport Fab from '@material-ui/core/Fab/Fab';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { Edit } from '@material-ui/icons';\n\nconst useStyles = makeStyles(theme => ({\n  fab: {\n    margin: theme.spacing(1),\n    position: 'fixed',\n    top: 'auto',\n    bottom: '30px',\n    right: '30px',\n    width: '100px',\n    height: '100px',\n  },\n}));\n\ninterface SellingButtonComponentProps {\n  onClick: (e: React.MouseEvent) => void;\n}\n\nconst SellingButtonComponent: React.FC<SellingButtonComponentProps> = ({\n  onClick,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <Fab className={classes.fab} color=\"primary\" onClick={onClick}>\n      <Edit fontSize=\"large\" />\n    </Fab>\n  );\n};\n\nexport { SellingButtonComponent };\n","import { push } from 'connected-react-router';\nimport { SellingButtonComponent } from '../components/SellingButtonComponent';\nimport { connect } from 'react-redux';\nimport { routes } from '../routes/Route';\nimport * as React from 'react';\nimport { AppState } from '../index';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { AnyAction } from 'redux';\n\nconst mapStateToProps = (state: AppState) => ({});\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, AnyAction>,\n) => ({\n  onClick: (e: React.MouseEvent) => {\n    e.preventDefault();\n    dispatch(push(routes.sell.path));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(SellingButtonComponent);\n","import React from 'react';\nimport { TimelineItem } from '../dataObjects/item';\nimport { ItemList } from '../components/ItemList';\nimport SellingButtonContainer from '../containers/SellingButtonContainer';\nimport { ErrorProps, PageComponentWithError } from '../hoc/withBaseComponent';\nimport BasePageContainer from '../containers/BasePageContainer';\nimport { createStyles, Theme, WithStyles } from '@material-ui/core';\nimport { StyleRules } from '@material-ui/core/styles';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport LoadingComponent from '../components/LoadingComponent';\nimport Typography from '@material-ui/core/Typography/Typography';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      marginTop: theme.spacing(1),\n      justifyContent: 'space-around',\n      overflow: 'hidden',\n    },\n  });\n\ninterface ItemListPageProps extends WithStyles<typeof styles> {\n  loading: boolean;\n  load: () => void;\n  items: TimelineItem[];\n  hasNext: boolean;\n  loadMore: (createdAt: number, itemId: number, page: number) => void;\n}\n\ntype Props = ItemListPageProps & ErrorProps;\n\nclass ItemListPage extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    this.props.load();\n  }\n\n  render() {\n    const { classes, loading, items, loadMore, hasNext } = this.props;\n\n    const Content: React.FC<{}> = () => {\n      if (items.length === 0) {\n        return (\n          <div className={classes.root}>\n            <Typography variant=\"h5\">出品されている商品はありません</Typography>\n            <SellingButtonContainer />\n          </div>\n        );\n      }\n\n      const lastItem = items[items.length - 1];\n      const loadMoreItems = loadMore.bind(\n        null,\n        lastItem.createdAt,\n        lastItem.id,\n      );\n      return (\n        <div className={classes.root}>\n          <ItemList items={items} loadMore={loadMoreItems} hasNext={hasNext} />\n          <SellingButtonContainer />\n        </div>\n      );\n    };\n\n    return (\n      <BasePageContainer>\n        {loading ? <LoadingComponent /> : <Content />}\n      </BasePageContainer>\n    );\n  }\n}\n\nexport default PageComponentWithError<any>()(withStyles(styles)(ItemListPage));\n","import { connect } from 'react-redux';\nimport { AppState } from '../index';\nimport ItemListPage from '../pages/ItemListPage';\nimport { fetchTimelineAction } from '../actions/fetchTimelineAction';\n\nconst mapStateToProps = (state: AppState) => {\n  return {\n    items: state.timeline.items,\n    hasNext: state.timeline.hasNext,\n    errorType: state.error.errorType,\n    loading: state.page.isTimelineLoading,\n  };\n};\nconst mapDispatchToProps = (dispatch: any) => ({\n  load: () => {\n    dispatch(fetchTimelineAction());\n  },\n  loadMore: (createdAt: number, itemId: number, page: number) => {\n    dispatch(fetchTimelineAction(createdAt, itemId));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ItemListPage);\n","import React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n}));\n\ntype Props = {\n  itemId: number;\n  postShipped: (itemId: number) => void;\n};\n\nconst Initial: React.FC<Props> = ({ itemId, postShipped }) => {\n  const classes = useStyles();\n\n  const onClick = (e: React.MouseEvent) => {\n    postShipped(itemId);\n  };\n\n  return (\n    <React.Fragment>\n      <Typography variant=\"h6\">商品が購入されました</Typography>\n      <Typography variant=\"h6\">\n        下記の「集荷予約」を押し、集荷予約の手続きをしてください\n      </Typography>\n      <Button\n        className={classes.button}\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={onClick}\n      >\n        集荷予約\n      </Button>\n    </React.Fragment>\n  );\n};\n\nexport default Initial;\n","import React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  qrCode: {\n    width: '300px',\n    height: '300px',\n    margin: theme.spacing(1),\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n}));\n\ntype Props = {\n  itemId: number;\n  transactionEvidenceId: number;\n  postShippedDone: (itemId: number) => void;\n};\n\nconst WaitShipping: React.FC<Props> = ({\n  itemId,\n  transactionEvidenceId,\n  postShippedDone,\n}) => {\n  const classes = useStyles();\n\n  const qrCodeUrl = `/transactions/${transactionEvidenceId}.png`;\n  const onClick = (e: React.MouseEvent) => {\n    postShippedDone(itemId);\n  };\n\n  return (\n    <Grid container>\n      <Grid item xs={12}>\n        <Typography variant=\"h6\">集荷予約が完了しました</Typography>\n        <Typography variant=\"h6\">\n          配達員に下記QRコードをお見せください\n        </Typography>\n        <Typography variant=\"h6\">\n          配達員に商品を渡したら下記の「発送完了」を押してください\n        </Typography>\n      </Grid>\n      <Grid item xs={12}>\n        <img className={classes.qrCode} src={qrCodeUrl} alt=\"QRコード\" />\n      </Grid>\n      <Grid item xs={12}>\n        <Button\n          className={classes.button}\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={onClick}\n        >\n          発送完了\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default WaitShipping;\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\n\ntype Props = {};\n\nconst WaitDone: React.FC<Props> = () => {\n  return (\n    <React.Fragment>\n      <Typography variant=\"h6\">商品を発送しました</Typography>\n      <Typography variant=\"h6\">\n        購入者が商品を受け取るのをお待ち下さい\n      </Typography>\n    </React.Fragment>\n  );\n};\n\nexport default WaitDone;\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\n\ntype Props = {};\n\nconst Done: React.FC<Props> = () => {\n  return (\n    <React.Fragment>\n      <Typography variant=\"h6\">取引が完了しました</Typography>\n    </React.Fragment>\n  );\n};\n\nexport default Done;\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport { ErrorRes, ShipDoneReq, ShipDoneRes } from '../types/appApiTypes';\nimport { fetchItemAction } from './fetchItemAction';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { AppState } from '../index';\nimport { SnackBarAction } from './actionTypes';\n\nexport const POST_SHIPPED_DONE_START = 'POST_SHIPPED_DONE_START';\nexport const POST_SHIPPED_DONE_SUCCESS = 'POST_SHIPPED_DONE_SUCCESS';\nexport const POST_SHIPPED_DONE_FAIL = 'POST_SHIPPED_DONE_FAIL';\nexport type PostShippedDoneActions =\n  | PostShippedDoneStartAction\n  | PostShippedDoneSuccessAction\n  | PostShippedDoneFailAction;\ntype ThunkResult<R> = ThunkAction<\n  R,\n  AppState,\n  undefined,\n  PostShippedDoneActions\n>;\n\nexport function postShippedDoneAction(itemId: number): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, PostShippedDoneActions>) => {\n    Promise.resolve()\n      .then(() => {\n        dispatch(postShippedDoneStartAction());\n      })\n      .then(() => {\n        return AppClient.post('/ship_done', {\n          item_id: itemId,\n        } as ShipDoneReq);\n      })\n      .then(async (response: Response) => {\n        if (response.status !== 200) {\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: ShipDoneRes) => {\n        dispatch(postShippedDoneSuccessAction());\n      })\n      .then(() => {\n        dispatch(fetchItemAction(itemId.toString())); // FIXME: 異常系のハンドリングが取引ページ向けでない\n      })\n      .catch((err: Error) => {\n        dispatch(postShippedDoneFailAction(err.message));\n      });\n  };\n}\n\nexport interface PostShippedDoneStartAction\n  extends Action<typeof POST_SHIPPED_DONE_START> {}\n\nexport function postShippedDoneStartAction(): PostShippedDoneStartAction {\n  return {\n    type: POST_SHIPPED_DONE_START,\n  };\n}\n\nexport interface PostShippedDoneSuccessAction\n  extends Action<typeof POST_SHIPPED_DONE_SUCCESS> {}\n\nexport function postShippedDoneSuccessAction(): PostShippedDoneSuccessAction {\n  return {\n    type: POST_SHIPPED_DONE_SUCCESS,\n  };\n}\n\nexport interface PostShippedDoneFailAction\n  extends SnackBarAction<typeof POST_SHIPPED_DONE_FAIL> {}\n\nexport function postShippedDoneFailAction(\n  error: string,\n): PostShippedDoneFailAction {\n  return {\n    type: POST_SHIPPED_DONE_FAIL,\n    snackBarMessage: error,\n  };\n}\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport { ErrorRes, ShipReq, ShipRes } from '../types/appApiTypes';\nimport { fetchItemAction } from './fetchItemAction';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { AppState } from '../index';\nimport { SnackBarAction } from './actionTypes';\n\nexport const POST_SHIPPED_START = 'POST_SHIPPED_START';\nexport const POST_SHIPPED_SUCCESS = 'POST_SHIPPED_SUCCESS';\nexport const POST_SHIPPED_FAIL = 'POST_SHIPPED_FAIL';\n\nexport type PostShippedActions =\n  | PostShippedStartAction\n  | PostShippedSuccessAction\n  | PostShippedFailAction;\ntype ThunkResult<R> = ThunkAction<R, AppState, undefined, PostShippedActions>;\n\nexport function postShippedAction(itemId: number): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, PostShippedActions>) => {\n    Promise.resolve()\n      .then(() => {\n        dispatch(postShippedStartAction());\n      })\n      .then(() => {\n        return AppClient.post('/ship', {\n          item_id: itemId,\n        } as ShipReq);\n      })\n      .then(async (response: Response) => {\n        if (response.status !== 200) {\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: ShipRes) => {\n        dispatch(postShippedSuccessAction());\n      })\n      .then(() => {\n        dispatch(fetchItemAction(itemId.toString())); // FIXME: 異常系のハンドリングが取引ページ向けでない\n      })\n      .catch((err: Error) => {\n        dispatch(postShippedFailAction(err.message));\n      });\n  };\n}\n\nexport interface PostShippedStartAction\n  extends Action<typeof POST_SHIPPED_START> {}\n\nexport function postShippedStartAction(): PostShippedStartAction {\n  return {\n    type: POST_SHIPPED_START,\n  };\n}\n\nexport interface PostShippedSuccessAction\n  extends Action<typeof POST_SHIPPED_SUCCESS> {}\n\nexport function postShippedSuccessAction(): PostShippedSuccessAction {\n  return {\n    type: POST_SHIPPED_SUCCESS,\n  };\n}\n\nexport interface PostShippedFailAction\n  extends SnackBarAction<typeof POST_SHIPPED_FAIL> {}\n\nexport function postShippedFailAction(error: string): PostShippedFailAction {\n  return {\n    type: POST_SHIPPED_FAIL,\n    snackBarMessage: error,\n  };\n}\n","import { AppState } from '../index';\nimport { connect } from 'react-redux';\nimport { TransactionSeller } from '../components/TransactionSeller';\nimport { postShippedDoneAction } from '../actions/postShippedDoneAction';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { postShippedAction } from '../actions/postShippedAction';\nimport { ActionTypes } from '../actions/actionTypes';\n\nconst mapStateToProps = (state: AppState) => ({});\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, ActionTypes>,\n) => ({\n  postShipped: (itemId: number) => {\n    dispatch(postShippedAction(itemId));\n  },\n  postShippedDone: (itemId: number) => {\n    dispatch(postShippedDoneAction(itemId));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(TransactionSeller);\n","import React from 'react';\nimport { TransactionStatus } from '../../dataObjects/transaction';\nimport { ShippingStatus } from '../../dataObjects/shipping';\nimport Initial from '../Transaction/Seller/Initial';\nimport WaitShipping from '../Transaction/Seller/WaitShipping';\nimport WaitDone from '../Transaction/Seller/WaitDone';\nimport Done from '../Transaction/Seller/Done';\n\nexport type Props = {\n  itemId: number;\n  transactionEvidenceId: number;\n  postShipped: (itemId: number) => void;\n  postShippedDone: (itemId: number) => void;\n  transactionStatus: TransactionStatus;\n  shippingStatus: ShippingStatus;\n};\n\nconst TransactionSeller: React.FC<Props> = ({\n  itemId,\n  transactionEvidenceId,\n  postShipped,\n  postShippedDone,\n  transactionStatus,\n  shippingStatus,\n}) => {\n  if (shippingStatus === 'initial' && transactionStatus === 'wait_shipping') {\n    return <Initial itemId={itemId} postShipped={postShipped} />;\n  }\n\n  if (\n    shippingStatus === 'wait_pickup' &&\n    transactionStatus === 'wait_shipping'\n  ) {\n    return (\n      <WaitShipping\n        itemId={itemId}\n        transactionEvidenceId={transactionEvidenceId}\n        postShippedDone={postShippedDone}\n      />\n    );\n  }\n\n  if (transactionStatus === 'wait_done') {\n    return <WaitDone />;\n  }\n\n  return <Done />;\n};\n\nexport { TransactionSeller };\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\n\ntype Props = {};\n\nconst Initial: React.FC<Props> = () => {\n  return (\n    <React.Fragment>\n      <Typography variant=\"h6\">商品を購入しました</Typography>\n      <Typography variant=\"h6\">出品者が発送するまでお待ち下さい</Typography>\n    </React.Fragment>\n  );\n};\n\nexport default Initial;\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\n\ntype Props = {};\n\nconst WaitShipping: React.FC<Props> = () => {\n  return (\n    <React.Fragment>\n      <Typography variant=\"h6\">商品を購入しました</Typography>\n      <Typography variant=\"h6\">出品者が発送するまでお待ち下さい</Typography>\n    </React.Fragment>\n  );\n};\n\nexport default WaitShipping;\n","import React from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  button: {\n    margin: theme.spacing(1),\n  },\n}));\n\ntype Props = {\n  itemId: number;\n  postComplete: (itemId: number) => void;\n};\n\nconst WaitDone: React.FC<Props> = ({ itemId, postComplete }) => {\n  const classes = useStyles();\n\n  const onClick = (e: React.MouseEvent) => {\n    postComplete(itemId);\n  };\n\n  return (\n    <React.Fragment>\n      <Typography variant=\"h6\">出品者により商品が発送されました</Typography>\n      <Typography variant=\"h6\">\n        商品が届き次第、下記の「取引完了」を押してください\n      </Typography>\n      <Button\n        className={classes.button}\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={onClick}\n      >\n        取引完了\n      </Button>\n    </React.Fragment>\n  );\n};\n\nexport default WaitDone;\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\n\ntype Props = {};\n\nconst Done: React.FC<Props> = () => {\n  return (\n    <React.Fragment>\n      <Typography variant=\"h6\">取引が完了しました</Typography>\n    </React.Fragment>\n  );\n};\n\nexport default Done;\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { Action } from 'redux';\nimport { CompleteReq, CompleteRes, ErrorRes } from '../types/appApiTypes';\nimport { fetchItemAction } from './fetchItemAction';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { AppState } from '../index';\nimport { SnackBarAction } from './actionTypes';\n\nexport const POST_COMPLETE_START = 'POST_COMPLETE_START';\nexport const POST_COMPLETE_SUCCESS = 'POST_COMPLETE_SUCCESS';\nexport const POST_COMPLETE_FAIL = 'POST_COMPLETE_FAIL';\n\nexport type PostCompleteActions =\n  | PostCompleteStartAction\n  | PostCompleteSuccessAction\n  | PostCompleteFailAction;\ntype ThunkResult<R> = ThunkAction<R, AppState, undefined, PostCompleteActions>;\n\nexport function postCompleteAction(itemId: number): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, PostCompleteActions>) => {\n    Promise.resolve()\n      .then(() => {\n        dispatch(postCompleteStartAction());\n      })\n      .then(() => {\n        return AppClient.post('/complete', {\n          item_id: itemId,\n        } as CompleteReq);\n      })\n      .then(async (response: Response) => {\n        if (response.status !== 200) {\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: CompleteRes) => {\n        dispatch(postCompleteSuccessAction());\n      })\n      .then(() => {\n        dispatch(fetchItemAction(itemId.toString())); // FIXME: 異常系のハンドリングが取引ページ向けでない\n      })\n      .catch((err: Error) => {\n        dispatch(postCompleteFailAction(err.message));\n      });\n  };\n}\n\nexport interface PostCompleteStartAction\n  extends Action<typeof POST_COMPLETE_START> {}\n\nexport function postCompleteStartAction(): PostCompleteStartAction {\n  return {\n    type: POST_COMPLETE_START,\n  };\n}\n\nexport interface PostCompleteSuccessAction\n  extends Action<typeof POST_COMPLETE_SUCCESS> {}\n\nexport function postCompleteSuccessAction(): PostCompleteSuccessAction {\n  return {\n    type: POST_COMPLETE_SUCCESS,\n  };\n}\n\nexport interface PostCompleteFailAction\n  extends SnackBarAction<typeof POST_COMPLETE_FAIL> {}\n\nexport function postCompleteFailAction(error: string): PostCompleteFailAction {\n  return {\n    type: POST_COMPLETE_FAIL,\n    snackBarMessage: error,\n  };\n}\n","import { AppState } from '../index';\nimport { connect } from 'react-redux';\nimport { TransactionBuyer } from '../components/TransactionBuyer';\nimport { postCompleteAction } from '../actions/postCompleteAction';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { ActionTypes } from '../actions/actionTypes';\n\nconst mapStateToProps = (state: AppState) => ({});\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, ActionTypes>,\n) => ({\n  postComplete: (itemId: number) => {\n    dispatch(postCompleteAction(itemId));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(TransactionBuyer);\n","import React from 'react';\nimport { TransactionStatus } from '../../dataObjects/transaction';\nimport { ShippingStatus } from '../../dataObjects/shipping';\nimport Initial from '../Transaction/Buyer/Initial';\nimport WaitShipping from '../Transaction/Buyer/WaitShipping';\nimport WaitDone from '../Transaction/Buyer/WaitDone';\nimport Done from '../Transaction/Buyer/Done';\n\nexport type Props = {\n  itemId: number;\n  postComplete: (itemId: number) => void;\n  transactionStatus: TransactionStatus;\n  shippingStatus: ShippingStatus;\n};\n\nconst TransactionBuyer: React.FC<Props> = ({\n  itemId,\n  postComplete,\n  transactionStatus,\n  shippingStatus,\n}) => {\n  if (shippingStatus === 'initial' && transactionStatus === 'wait_shipping') {\n    return <Initial />;\n  }\n\n  if (\n    shippingStatus === 'wait_pickup' &&\n    transactionStatus === 'wait_shipping'\n  ) {\n    return <WaitShipping />;\n  }\n\n  if (transactionStatus === 'wait_done') {\n    return <WaitDone itemId={itemId} postComplete={postComplete} />;\n  }\n\n  return <Done />;\n};\n\nexport { TransactionBuyer };\n","import React, { ReactElement } from 'react';\nimport BasePageContainer from '../containers/BasePageContainer';\nimport { ErrorProps, PageComponentWithError } from '../hoc/withBaseComponent';\nimport { RouteComponentProps } from 'react-router';\nimport { ItemData } from '../dataObjects/item';\nimport LoadingComponent from '../components/LoadingComponent';\nimport { NotFoundPage } from './error/NotFoundPage';\nimport SellerTransactionContainer from '../containers/SellerTransactionContainer';\nimport { InternalServerErrorPage } from './error/InternalServerErrorPage';\nimport BuyerTransactionContainer from '../containers/BuyerTransactionContainer';\nimport { createStyles, Grid, Theme, WithStyles } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport { routes } from '../routes/Route';\nimport { Link as RouteLink } from 'react-router-dom';\nimport { StyleRules } from '@material-ui/core/styles';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    itemImage: {\n      width: '100%',\n      maxWidth: '500px',\n      height: 'auto',\n    },\n    divider: {\n      margin: theme.spacing(1),\n    },\n    descSection: {\n      marginTop: theme.spacing(3),\n      marginBottom: theme.spacing(3),\n    },\n  });\n\ninterface TransactionProps extends WithStyles<typeof styles> {\n  loading: boolean;\n  item?: ItemData;\n  load: (itemId: string) => void;\n  // Logged in user info\n  auth: {\n    userId: number;\n  };\n}\n\ntype Props = TransactionProps &\n  RouteComponentProps<{ item_id: string }> &\n  ErrorProps;\n\nclass TransactionPage extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    this.props.load(this.props.match.params.item_id);\n  }\n\n  render() {\n    const {\n      loading,\n      item,\n      auth: { userId },\n      classes,\n    } = this.props;\n\n    if (loading) {\n      return (\n        <BasePageContainer>\n          <LoadingComponent />\n        </BasePageContainer>\n      );\n    }\n\n    if (item === undefined) {\n      return <NotFoundPage />;\n    }\n\n    if (\n      item.shippingStatus === undefined ||\n      item.transactionEvidenceStatus === undefined ||\n      item.transactionEvidenceId === undefined\n    ) {\n      return (\n        <InternalServerErrorPage message=\"取引中の商品ではない、もしくはデータ形式が不正です\" />\n      );\n    }\n\n    let TransactionComponent: ReactElement | undefined;\n\n    if (userId === item.sellerId) {\n      TransactionComponent = (\n        <SellerTransactionContainer\n          itemId={item.id}\n          transactionEvidenceId={item.transactionEvidenceId}\n          transactionStatus={item.transactionEvidenceStatus}\n          shippingStatus={item.shippingStatus}\n        />\n      );\n    }\n\n    if (userId === item.buyerId) {\n      TransactionComponent = (\n        <BuyerTransactionContainer\n          itemId={item.id}\n          transactionStatus={item.transactionEvidenceStatus}\n          shippingStatus={item.shippingStatus}\n        />\n      );\n    }\n\n    if (TransactionComponent === undefined) {\n      return <NotFoundPage message=\"商品が読み込めませんでした\" />;\n    }\n\n    return (\n      <BasePageContainer>\n        <Grid container spacing={3}>\n          <Grid item xs={12}>\n            {TransactionComponent}\n          </Grid>\n          <Grid item xs={12}>\n            <Typography className={classes.descSection} variant=\"h4\">\n              取引情報\n            </Typography>\n            <Divider className={classes.divider} variant=\"middle\" />\n          </Grid>\n          <Grid item xs={3}>\n            <RouteLink to={routes.item.getPath(item.id)}>\n              <img\n                className={classes.itemImage}\n                alt={item.name}\n                src={item.thumbnailUrl}\n              />\n            </RouteLink>\n          </Grid>\n          <Grid item xs={9} container>\n            <Grid item>\n              <Typography variant=\"h5\">{item.name}</Typography>\n              <Typography variant=\"h6\">{item.price}ｲｽｺｲﾝ</Typography>\n            </Grid>\n          </Grid>\n        </Grid>\n      </BasePageContainer>\n    );\n  }\n}\n\nexport default PageComponentWithError<any>()(\n  withStyles(styles)(TransactionPage),\n);\n","import { connect } from 'react-redux';\nimport { AppState } from '../index';\nimport TransactionPage from '../pages/TransactionPage';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { AnyAction } from 'redux';\nimport { fetchItemAction } from '../actions/fetchItemAction';\n\nconst mapStateToProps = (state: AppState) => ({\n  loading: state.page.isItemLoading,\n  item: state.viewingItem.item,\n  auth: {\n    userId: state.authStatus.userId || 0,\n  },\n  errorType: state.error.errorType,\n});\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, AnyAction>,\n) => ({\n  load: (itemId: string) => {\n    dispatch(fetchItemAction(itemId));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(TransactionPage);\n","import React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { ItemStatus } from '../../dataObjects/item';\nimport { Theme } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card';\n\nconst baseWidth = '80px';\nconst baseHeight = '25px';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  normalLabel: {\n    width: baseWidth,\n    height: baseHeight,\n    color: theme.palette.secondary.contrastText,\n    backgroundColor: theme.palette.secondary.main,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n  },\n  soldOutLabel: {\n    width: baseWidth,\n    height: baseHeight,\n    color: theme.palette.text.primary,\n    backgroundColor: theme.palette.grey.A100,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n  },\n  tradingLabel: {\n    width: baseWidth,\n    height: baseHeight,\n    color: theme.palette.primary.contrastText,\n    backgroundColor: theme.palette.primary.main,\n    padding: theme.spacing(1),\n    textAlign: 'center',\n  },\n}));\n\ninterface Props {\n  itemStatus: ItemStatus;\n}\n\nconst getLabelByStatus = (\n  status: ItemStatus,\n): [string, 'normalLabel' | 'soldOutLabel' | 'tradingLabel'] => {\n  switch (status) {\n    case 'on_sale':\n      return ['出品中', 'normalLabel'];\n    case 'trading':\n      return ['取引中', 'tradingLabel'];\n    case 'sold_out':\n      return ['売却済', 'soldOutLabel'];\n    case 'stop':\n      return ['出品停止中', 'normalLabel'];\n    case 'cancel':\n      return ['キャンセル', 'normalLabel'];\n  }\n};\n\nconst TransactionLabel: React.FC<Props> = ({ itemStatus }) => {\n  const classes = useStyles();\n  const [labelName, classKey] = getLabelByStatus(itemStatus);\n  const className = classes[classKey];\n\n  return (\n    <div className={classes.container}>\n      <Card className={className}>\n        <Typography variant=\"subtitle2\" component=\"p\">\n          {labelName}\n        </Typography>\n      </Card>\n    </div>\n  );\n};\n\nexport { TransactionLabel };\n","import React from 'react';\nimport Card from '@material-ui/core/Card';\nimport { Link as RouteLink } from 'react-router-dom';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { routes } from '../../routes/Route';\nimport { TransactionItem } from '../../dataObjects/item';\nimport CardMedia from '@material-ui/core/CardMedia/CardMedia';\nimport CardContent from '@material-ui/core/CardContent/CardContent';\nimport Typography from '@material-ui/core/Typography/Typography';\nimport { TransactionLabel } from '../TransactionLabel';\nimport { Theme } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  card: {\n    display: 'flex',\n  },\n  detail: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  itemTitle: {\n    paddingLeft: theme.spacing(1),\n    paddingBottom: theme.spacing(2),\n  },\n  img: {\n    width: '100px',\n    height: '100%',\n  },\n}));\n\ninterface Props {\n  item: TransactionItem;\n}\n\nconst TransactionComponent: React.FC<Props> = ({ item }) => {\n  const classes = useStyles();\n  const link =\n    item.status === 'on_sale'\n      ? routes.item.getPath(item.id)\n      : routes.transaction.getPath(item.id);\n\n  return (\n    <Card className={classes.card}>\n      <RouteLink to={link}>\n        <CardMedia\n          className={classes.img}\n          image={item.thumbnailUrl}\n          title={item.name}\n        />\n      </RouteLink>\n      <div className={classes.detail}>\n        <CardContent>\n          <Typography className={classes.itemTitle} variant=\"h6\">\n            {item.name}\n          </Typography>\n          <TransactionLabel itemStatus={item.status} />\n        </CardContent>\n      </div>\n    </Card>\n  );\n};\n\nexport { TransactionComponent };\n","import React from 'react';\nimport { TransactionItem } from '../dataObjects/item';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport CircularProgress from '@material-ui/core/CircularProgress/CircularProgress';\nimport { TransactionComponent } from './TransactionComponent';\n\nconst useStyles = makeStyles(theme => ({\n  grid: {\n    width: '900px',\n    height: '300px',\n  },\n}));\n\ninterface Props {\n  items: TransactionItem[];\n  hasNext: boolean;\n  loadMore: (createdAt: number, itemId: number, page: number) => void;\n}\n\nconst TransactionListComponent: React.FC<Props> = function({\n  items,\n  hasNext,\n  loadMore,\n}: Props) {\n  const classes = useStyles();\n\n  const transactionsComponents = [];\n\n  for (const item of items) {\n    transactionsComponents.push(\n      <GridListTile className={classes.grid} key={item.id}>\n        <TransactionComponent item={item} />\n      </GridListTile>,\n    );\n  }\n\n  const lastItem = items[items.length - 1];\n\n  return (\n    <InfiniteScroll\n      pageStart={0}\n      loadMore={loadMore.bind(null, lastItem.createdAt, lastItem.id)}\n      hasMore={hasNext}\n      loader={<CircularProgress />}\n    >\n      <GridList cols={1}>{transactionsComponents}</GridList>\n    </InfiniteScroll>\n  );\n};\n\nexport { TransactionListComponent };\n","import React, { ReactElement } from 'react';\nimport { ItemList } from '../components/ItemList';\nimport { ItemData, TransactionItem } from '../dataObjects/item';\nimport { UserData } from '../dataObjects/user';\nimport Avatar from '@material-ui/core/Avatar';\nimport { createStyles, Grid, Theme, WithStyles } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport SellingButtonContainer from '../containers/SellingButtonContainer';\nimport BasePageContainer from '../containers/BasePageContainer';\nimport { ErrorProps, PageComponentWithError } from '../hoc/withBaseComponent';\nimport { RouteComponentProps } from 'react-router';\nimport LoadingComponent from '../components/LoadingComponent';\nimport { TransactionListComponent } from '../components/TransactionListComponent';\nimport Tabs from '@material-ui/core/Tabs/Tabs';\nimport Tab from '@material-ui/core/Tab/Tab';\nimport { StyleRules } from '@material-ui/core/styles';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    avatar: {\n      margin: theme.spacing(3),\n      width: '100px',\n      height: '100px',\n    },\n    tab: {\n      color: theme.palette.text.primary,\n      backgroundColor: theme.palette.primary.light,\n    },\n    list: {\n      marginTop: theme.spacing(4),\n    },\n  });\n\ninterface UserPageProps extends WithStyles<typeof styles> {\n  loading: boolean;\n  load: (userId: number, isMyPage: boolean) => void;\n  loggedInUserId: number;\n  items: ItemData[];\n  itemsHasNext: boolean;\n  itemsLoadMore: (\n    userId: number,\n    itemId: number,\n    createdAt: number,\n    page: number,\n  ) => void;\n  transactions: TransactionItem[];\n  transactionsHasNext: boolean;\n  transactionsLoadMore: (\n    itemId: number,\n    createdAt: number,\n    page: number,\n  ) => void;\n  user: UserData;\n}\n\ntype Props = UserPageProps &\n  ErrorProps &\n  RouteComponentProps<{ user_id: string }>;\n\ntype State = {\n  tabValue: any;\n};\n\nclass UserPage extends React.Component<Props, State> {\n  private ITEM_LIST_TAB = 0;\n  private TRANSACTION_LIST_TAB = 1;\n  private readonly isMyPage: boolean;\n\n  constructor(props: Props) {\n    super(props);\n\n    const pageUserId = Number(this.props.match.params.user_id);\n    this.isMyPage = this.props.loggedInUserId === pageUserId;\n    this.props.load(pageUserId, this.isMyPage);\n    this.state = {\n      tabValue: this.ITEM_LIST_TAB,\n    };\n\n    this._handleChange = this._handleChange.bind(this);\n  }\n\n  _handleChange(e: React.ChangeEvent<{}>, newValue: any) {\n    this.setState({\n      tabValue: newValue,\n    });\n  }\n\n  _getItemList(): ReactElement {\n    const { items } = this.props;\n\n    if (items.length === 0) {\n      return <Typography>現在出品されている商品はありません</Typography>;\n    }\n\n    const { itemsHasNext, itemsLoadMore, user } = this.props;\n    const lastItem = items[items.length - 1];\n\n    return (\n      <ItemList\n        items={items}\n        hasNext={itemsHasNext}\n        loadMore={itemsLoadMore.bind(\n          null,\n          user.id,\n          lastItem.id,\n          lastItem.createdAt,\n        )}\n      />\n    );\n  }\n\n  _getTransactionsList(): ReactElement {\n    const { transactions } = this.props;\n\n    if (transactions.length === 0) {\n      return <Typography>取引はありません</Typography>;\n    }\n\n    const { transactionsHasNext, transactionsLoadMore } = this.props;\n    const lastTransaction = transactions[transactions.length - 1];\n\n    return (\n      <TransactionListComponent\n        items={transactions}\n        hasNext={transactionsHasNext}\n        loadMore={transactionsLoadMore.bind(\n          null,\n          lastTransaction.id,\n          lastTransaction.createdAt,\n        )}\n      />\n    );\n  }\n\n  render() {\n    const { loading, user, classes } = this.props;\n    const { tabValue } = this.state;\n\n    if (loading) {\n      return <LoadingComponent />;\n    }\n\n    return (\n      <BasePageContainer>\n        <Grid\n          container\n          direction=\"row\"\n          justify=\"center\"\n          alignItems=\"center\"\n          wrap=\"nowrap\"\n          spacing={2}\n        >\n          <Grid item>\n            <Avatar className={classes.avatar}>\n              {user.accountName.charAt(0)}\n            </Avatar>\n          </Grid>\n          <Grid item xs>\n            <Typography variant=\"h3\">{user.accountName}</Typography>\n          </Grid>\n        </Grid>\n        <Divider variant=\"middle\" />\n        <Tabs value={tabValue} onChange={this._handleChange}>\n          <Tab label=\"出品商品\" id=\"tab--item-list\" />\n          {this.isMyPage && <Tab label=\"取引一覧\" id=\"tab--item-list\" />}\n        </Tabs>\n        <div\n          className={classes.list}\n          id=\"tab--item-list\"\n          hidden={tabValue !== this.ITEM_LIST_TAB}\n        >\n          {this._getItemList()}\n        </div>\n        {this.isMyPage && (\n          <div\n            className={classes.list}\n            id=\"tab--transactions-list\"\n            hidden={tabValue !== this.TRANSACTION_LIST_TAB}\n          >\n            {this._getTransactionsList()}\n          </div>\n        )}\n        <SellingButtonContainer />\n      </BasePageContainer>\n    );\n  }\n}\n\nexport default PageComponentWithError<any>()(withStyles(styles)(UserPage));\n","import { connect } from 'react-redux';\nimport { AppState } from '../index';\nimport UserPage from '../pages/UserPage';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { AnyAction } from 'redux';\nimport { fetchTransactionsAction } from '../actions/fetchTransactionsAction';\nimport { fetchUserItemsAction } from '../actions/fetchUserItemsAction';\nimport { fetchUserPageDataAction } from '../actions/fetchUserPageDataAction';\n\nconst mapStateToProps = (state: AppState) => ({\n  loading: state.page.isUserPageLoading,\n  loggedInUserId: state.authStatus.userId,\n  items: state.userItems.items,\n  itemsHasNext: state.userItems.hasNext,\n  transactions: state.transactions.items,\n  transactionsHasNext: state.transactions.hasNext,\n  user: state.viewingUser.user,\n  errorType: state.error.errorType,\n});\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, AnyAction>,\n) => ({\n  load: (userId: number, isMyPage: boolean) => {\n    dispatch(fetchUserPageDataAction(userId, isMyPage));\n  },\n  itemsLoadMore: (\n    userId: number,\n    itemId: number,\n    createdAt: number,\n    page: number,\n  ) => {\n    dispatch(fetchUserItemsAction(userId, itemId, createdAt));\n  },\n  transactionsLoadMore: (itemId: number, createdAt: number, page: number) => {\n    dispatch(fetchTransactionsAction(itemId, createdAt));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(UserPage);\n","import React from 'react';\nimport BasePageContainer from '../containers/BasePageContainer';\nimport { Grid, Theme } from '@material-ui/core';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport Divider from '@material-ui/core/Divider';\nimport { InternalServerErrorPage } from './error/InternalServerErrorPage';\nimport SellingButtonComponent from '../containers/SellingButtonContainer';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  avatar: {\n    margin: theme.spacing(3),\n    width: '100px',\n    height: '100px',\n  },\n  divider: {\n    margin: theme.spacing(1),\n  },\n  descSection: {\n    marginTop: theme.spacing(3),\n    marginBottom: theme.spacing(3),\n  },\n}));\n\ntype Props = {\n  id?: number;\n  accountName?: string;\n  address?: string;\n  numSellItems?: number;\n};\n\nconst UserSettingPage: React.FC<Props> = ({\n  id,\n  accountName,\n  address,\n  numSellItems,\n}) => {\n  const classes = useStyles();\n\n  if (\n    id === undefined ||\n    accountName === undefined ||\n    address === undefined ||\n    numSellItems === undefined\n  ) {\n    return (\n      <InternalServerErrorPage message=\"ユーザ情報が読み込めませんでした\" />\n    );\n  }\n\n  return (\n    <BasePageContainer>\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"center\"\n        alignItems=\"center\"\n        wrap=\"nowrap\"\n        spacing={2}\n      >\n        <Grid item xs={3}>\n          <Avatar className={classes.avatar}>{accountName.charAt(0)}</Avatar>\n        </Grid>\n        <Grid item xs={9}>\n          <Typography variant=\"h3\">{accountName}</Typography>\n        </Grid>\n      </Grid>\n      <Grid container>\n        <Grid item xs={12}>\n          <div className={classes.descSection}>\n            <Typography variant=\"h4\">住所</Typography>\n            <Divider className={classes.divider} variant=\"middle\" />\n            <Typography variant=\"body1\">{address}</Typography>\n          </div>\n          <div className={classes.descSection}>\n            <Typography variant=\"h4\">出品数</Typography>\n            <Divider className={classes.divider} variant=\"middle\" />\n            <Typography variant=\"body1\">{numSellItems}</Typography>\n          </div>\n        </Grid>\n      </Grid>\n      <SellingButtonComponent />\n    </BasePageContainer>\n  );\n};\n\nexport default UserSettingPage;\n","import { connect } from 'react-redux';\nimport { AppState } from '../index';\nimport UserSettingPage from '../pages/UserSettingPage';\nimport { Dispatch } from 'redux';\n\nconst mapStateToProps = (state: AppState) => ({\n  id: state.authStatus.userId,\n  accountName: state.authStatus.accountName,\n  address: state.authStatus.address,\n  numSellItems: state.authStatus.numSellItems,\n});\nconst mapDispatchToProps = (dispatch: Dispatch) => ({});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(UserSettingPage);\n","import { AppState } from '../index';\nimport { connect } from 'react-redux';\nimport { AuthRoute } from '../components/Route/AuthRoute';\nimport { fetchSettings } from '../actions/settingsAction';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { AnyAction } from 'redux';\n\nconst mapStateToProps = (state: AppState) => ({\n  isLoggedIn: !!state.authStatus.userId,\n  loading: !state.authStatus.checked,\n  alreadyLoaded: state.authStatus.checked,\n});\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, AnyAction>,\n) => ({\n  load: () => {\n    dispatch(fetchSettings());\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(AuthRoute);\n","import React from 'react';\nimport { Redirect, Route, RouteProps } from 'react-router';\nimport { routes } from '../../routes/Route';\nimport LoadingComponent from '../LoadingComponent';\n\ntype Props = {\n  isLoggedIn: boolean;\n  loading: boolean;\n  load: () => void;\n  alreadyLoaded: boolean;\n} & RouteProps;\n\nconst AuthRoute: React.FC<Props> = ({\n  component: Component,\n  isLoggedIn,\n  loading,\n  load,\n  alreadyLoaded,\n  ...rest\n}) => {\n  if (!Component) {\n    throw new Error('component attribute required for AuthRoute component');\n  }\n\n  if (!alreadyLoaded) {\n    load();\n  }\n\n  return (\n    <Route\n      {...rest}\n      render={props =>\n        loading ? (\n          <LoadingComponent />\n        ) : isLoggedIn ? (\n          <Component {...props} />\n        ) : (\n          <Redirect to={routes.login.path} />\n        )\n      }\n    />\n  );\n};\n\nexport { AuthRoute };\n","import { AppState } from '../index';\nimport { AnyAction } from 'redux';\nimport { connect } from 'react-redux';\nimport { NonAuthRoute } from '../components/Route/NonAuthRoute';\nimport { fetchSettings } from '../actions/settingsAction';\nimport { ThunkDispatch } from 'redux-thunk';\n\nconst mapStateToProps = (state: AppState) => ({\n  isLoggedIn: !!state.authStatus.userId,\n  loading: !state.authStatus.checked,\n  alreadyLoaded: state.authStatus.checked,\n});\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, AnyAction>,\n) => ({\n  load: () => {\n    dispatch(fetchSettings());\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(NonAuthRoute);\n","import React from 'react';\nimport { Redirect, Route, RouteProps } from 'react-router';\nimport { routes } from '../../routes/Route';\nimport LoadingComponent from '../LoadingComponent';\n\ntype Props = {\n  isLoggedIn: boolean;\n  loading: boolean;\n  load: () => void;\n  alreadyLoaded: boolean;\n} & RouteProps;\n\nconst NonAuthRoute: React.FC<Props> = ({\n  component: Component,\n  isLoggedIn,\n  loading,\n  load,\n  alreadyLoaded,\n  ...rest\n}) => {\n  if (!Component) {\n    throw new Error('component attribute required for NonAuthRoute component');\n  }\n\n  if (!alreadyLoaded) {\n    load();\n  }\n\n  return (\n    <Route\n      {...rest}\n      render={props =>\n        loading ? (\n          <LoadingComponent />\n        ) : !isLoggedIn ? (\n          <Component {...props} />\n        ) : (\n          <Redirect to={routes.timeline.path} />\n        )\n      }\n    />\n  );\n};\n\nexport { NonAuthRoute };\n","import React from 'react';\nimport BasePageContainer from '../containers/BasePageContainer';\nimport { routes } from '../routes/Route';\nimport { Button, Theme } from '@material-ui/core';\nimport Typography from '@material-ui/core/Typography';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { Link, LinkProps } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  paper: {\n    marginTop: theme.spacing(2),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  textarea: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(2),\n  },\n  checklist: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n  img: {\n    width: '70%',\n  },\n  button: {\n    margin: theme.spacing(1),\n  },\n}));\n\nconst TopPage: React.FC = () => {\n  const classes = useStyles();\n  const LoginButtonLink = React.forwardRef(\n    (props: LinkProps, ref: React.Ref<any>) => (\n      <Link innerRef={ref} {...props}>\n        ログイン\n      </Link>\n    ),\n  );\n  const RegisterButtonLink = React.forwardRef(\n    (props: LinkProps, ref: React.Ref<any>) => (\n      <Link innerRef={ref} {...props}>\n        新規会員登録\n      </Link>\n    ),\n  );\n\n  return (\n    <BasePageContainer>\n      <div className={classes.paper}>\n        <img className={classes.img} src={'/logo.png'} alt={'ISUCARI'} />\n        <div className={classes.textarea}>\n          <Typography variant=\"h6\">\n            椅子限定のフリマサイト ついにリリース！\n          </Typography>\n          <div className={classes.checklist}>\n            <Typography variant=\"h6\">✔ 安全なカード決済</Typography>\n            <Typography variant=\"h6\">✔ お互い匿名で安心配送</Typography>\n          </div>\n          <Typography variant=\"h6\">\n            安心安全にあなただけの椅子を手に入れよう！\n          </Typography>\n        </div>\n        <Button\n          color=\"primary\"\n          fullWidth\n          className={classes.button}\n          variant=\"contained\"\n          size=\"medium\"\n          component={LoginButtonLink}\n          to={routes.login.path}\n        />\n        <Button\n          color=\"primary\"\n          fullWidth\n          className={classes.button}\n          variant=\"outlined\"\n          size=\"medium\"\n          component={RegisterButtonLink}\n          to={routes.register.path}\n        />\n      </div>\n    </BasePageContainer>\n  );\n};\n\nexport default TopPage;\n","import React from 'react';\nimport { TimelineItem } from '../dataObjects/item';\nimport { ItemList } from '../components/ItemList';\nimport SellingButtonContainer from '../containers/SellingButtonContainer';\nimport { ErrorProps, PageComponentWithError } from '../hoc/withBaseComponent';\nimport BasePageContainer from '../containers/BasePageContainer';\nimport { createStyles, Theme, WithStyles } from '@material-ui/core';\nimport { StyleRules } from '@material-ui/core/styles';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport LoadingComponent from '../components/LoadingComponent';\nimport Typography from '@material-ui/core/Typography/Typography';\nimport { RouteComponentProps } from 'react-router';\nimport { InternalServerErrorPage } from './error/InternalServerErrorPage';\nimport validator from 'validator';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      display: 'flex',\n      flexWrap: 'wrap',\n      marginTop: theme.spacing(1),\n      justifyContent: 'space-around',\n      overflow: 'hidden',\n    },\n  });\n\ninterface CategoryItemListPageProps extends WithStyles<typeof styles> {\n  loading: boolean;\n  load: (categoryId: number) => void;\n  items: TimelineItem[];\n  hasNext: boolean;\n  categoryId: number;\n  categoryName: string;\n  loadMore: (\n    createdAt: number,\n    itemId: number,\n    categoryId: number,\n    page: number,\n  ) => void;\n}\n\ntype Props = CategoryItemListPageProps &\n  RouteComponentProps<{ category_id: string }> &\n  ErrorProps;\n\ntype State = {\n  categoryIdIsValid: boolean;\n};\n\nclass CategoryItemListPage extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    const categoryId = this.props.match.params.category_id;\n    const categoryIdIsValid = validator.isNumeric(categoryId);\n\n    if (categoryIdIsValid) {\n      this.props.load(Number(categoryId));\n    }\n\n    this.state = {\n      categoryIdIsValid,\n    };\n  }\n\n  render() {\n    const {\n      classes,\n      loading,\n      items,\n      categoryId,\n      categoryName,\n      loadMore,\n      hasNext,\n    } = this.props;\n    const { categoryIdIsValid } = this.state;\n\n    const Content: React.FC<{}> = () => {\n      if (items.length === 0) {\n        return (\n          <div className={classes.root}>\n            <Typography variant=\"h5\">出品されている商品はありません</Typography>\n            <SellingButtonContainer />\n          </div>\n        );\n      }\n\n      const lastItem = items[items.length - 1];\n      const loadMoreItems = loadMore.bind(\n        null,\n        lastItem.createdAt,\n        lastItem.id,\n        categoryId,\n      );\n\n      return (\n        <div className={classes.root}>\n          <Typography variant=\"h6\">\n            「{categoryName}」カテゴリの新着商品一覧\n          </Typography>\n          <ItemList items={items} hasNext={hasNext} loadMore={loadMoreItems} />\n          <SellingButtonContainer />\n        </div>\n      );\n    };\n\n    return (\n      <BasePageContainer>\n        {!categoryIdIsValid ? (\n          <InternalServerErrorPage message=\"Category IDは数字のみです\" />\n        ) : loading ? (\n          <LoadingComponent />\n        ) : (\n          <Content />\n        )}\n      </BasePageContainer>\n    );\n  }\n}\n\nexport default PageComponentWithError<any>()(\n  withStyles(styles)(CategoryItemListPage),\n);\n","import { connect } from 'react-redux';\nimport { AppState } from '../index';\nimport { fetchTimelineAction } from '../actions/fetchTimelineAction';\nimport CategoryItemListPage from '../pages/CategoryItemListPage';\n\nconst mapStateToProps = (state: AppState) => {\n  return {\n    items: state.timeline.items,\n    hasNext: state.timeline.hasNext,\n    categoryId: state.timeline.categoryId,\n    categoryName: state.timeline.categoryName,\n    errorType: state.error.errorType,\n    loading: state.page.isTimelineLoading,\n  };\n};\nconst mapDispatchToProps = (dispatch: any) => ({\n  load: (categoryId: number) => {\n    dispatch(fetchTimelineAction(undefined, undefined, categoryId));\n  },\n  loadMore: (\n    createdAt: number,\n    itemId: number,\n    categoryId: number,\n    page: number,\n  ) => {\n    dispatch(fetchTimelineAction(createdAt, itemId, categoryId));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(CategoryItemListPage);\n","import React from 'react';\nimport BasePageContainer from '../containers/BasePageContainer';\nimport { Button } from '@material-ui/core';\n\ntype Props = {\n  itemId: number;\n  onClickTransaction: (itemId: number) => void;\n};\n\nconst BuyCompletePage: React.FC<Props> = ({ itemId, onClickTransaction }) => (\n  <BasePageContainer>\n    <div>購入が完了しました</div>\n    <Button\n      color=\"primary\"\n      variant=\"contained\"\n      onClick={(e: React.MouseEvent) => {\n        onClickTransaction(itemId);\n      }}\n    >\n      取引画面へ\n    </Button>\n  </BasePageContainer>\n);\n\nexport default BuyCompletePage;\n","import { connect } from 'react-redux';\nimport BuyCompletePage from '../pages/BuyComplete';\nimport { Dispatch } from 'redux';\nimport { push } from 'connected-react-router';\nimport { routes } from '../routes/Route';\n\nconst mapStateToProps = (state: any) => ({\n  itemId: state.viewingItem.item.id || 0,\n});\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  onClickTransaction: (itemId: number) => {\n    dispatch(push(routes.transaction.getPath(itemId)));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(BuyCompletePage);\n","import AppClient from '../httpClients/appClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport { Action } from 'redux';\nimport { ErrorRes, ItemEditReq, ItemEditRes } from '../types/appApiTypes';\nimport { CallHistoryMethodAction, push } from 'connected-react-router';\nimport { routes } from '../routes/Route';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { AppState } from '../index';\n\nexport const POST_ITEM_EDIT_START = 'POST_ITEM_EDIT_START';\nexport const POST_ITEM_EDIT_SUCCESS = 'POST_ITEM_EDIT_SUCCESS';\nexport const POST_ITEM_EDIT_FAIL = 'POST_ITEM_EDIT_FAIL';\n\nexport type PostItemEditActions =\n  | PostItemEditStartAction\n  | PostItemEditSuccessAction\n  | PostItemEditFailAction\n  | CallHistoryMethodAction;\ntype ThunkResult<R> = ThunkAction<R, AppState, undefined, PostItemEditActions>;\n\nexport function postItemEditAction(\n  itemId: number,\n  itemPrice?: number,\n): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, PostItemEditActions>) => {\n    Promise.resolve()\n      .then(() => {\n        dispatch(postItemEditStartAction());\n      })\n      .then(() => {\n        const reqParams = {\n          item_id: itemId,\n        } as ItemEditReq;\n\n        if (itemPrice) {\n          reqParams.item_price = itemPrice;\n        }\n        return AppClient.post('/items/edit', reqParams);\n      })\n      .then(async (response: Response) => {\n        if (response.status !== 200) {\n          const errRes: ErrorRes = await response.json();\n          throw new AppResponseError(errRes.error, response);\n        }\n\n        return await response.json();\n      })\n      .then((body: ItemEditRes) => {\n        dispatch(postItemEditSuccessAction());\n      })\n      .then(() => {\n        dispatch(push(routes.item.getPath(itemId)));\n      })\n      .catch((err: Error) => {\n        dispatch(\n          postItemEditFailAction({\n            itemEditFormError: err.message,\n          }),\n        );\n      });\n  };\n}\n\nexport interface PostItemEditStartAction\n  extends Action<typeof POST_ITEM_EDIT_START> {}\n\nexport function postItemEditStartAction(): PostItemEditStartAction {\n  return {\n    type: POST_ITEM_EDIT_START,\n  };\n}\n\nexport interface PostItemEditSuccessAction\n  extends Action<typeof POST_ITEM_EDIT_SUCCESS> {}\n\nexport function postItemEditSuccessAction(): PostItemEditSuccessAction {\n  return {\n    type: POST_ITEM_EDIT_SUCCESS,\n  };\n}\n\nexport interface PostItemEditFailAction\n  extends Action<typeof POST_ITEM_EDIT_FAIL> {\n  payload: FormErrorState;\n}\n\nexport function postItemEditFailAction(\n  newErrors: FormErrorState,\n): PostItemEditFailAction {\n  return {\n    type: POST_ITEM_EDIT_FAIL,\n    payload: newErrors,\n  };\n}\n","import React from 'react';\nimport BasePageContainer from '../containers/BasePageContainer';\nimport {\n  Button,\n  createStyles,\n  TextField,\n  Theme,\n  Typography,\n  WithStyles,\n} from '@material-ui/core';\nimport { StyleRules } from '@material-ui/core/styles';\nimport { ItemData } from '../dataObjects/item';\nimport { RouteComponentProps } from 'react-router';\nimport { ErrorProps, PageComponentWithError } from '../hoc/withBaseComponent';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport LoadingComponent from '../components/LoadingComponent';\nimport { ErrorMessageComponent } from '../components/ErrorMessageComponent';\nimport validator from 'validator';\nimport { InternalServerErrorPage } from './error/InternalServerErrorPage';\nimport { Link as RouteLink } from 'react-router-dom';\nimport { routes } from '../routes/Route';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    link: {\n      textDecoration: 'none',\n    },\n  });\n\ninterface BaseProps extends WithStyles<typeof styles> {\n  loading: boolean;\n  load: (itemId: number) => void;\n  item?: ItemData;\n  formError?: string;\n  onClickEdit: (itemId: number, price: number) => void;\n}\n\ntype Props = BaseProps & RouteComponentProps<{ item_id: string }> & ErrorProps;\n\ninterface State {\n  price: number;\n}\n\nclass ItemEditPage extends React.Component<Props, State> {\n  private readonly itemId: number;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.itemId = Number(this.props.match.params.item_id);\n    this.props.load(this.itemId);\n\n    const { item } = this.props;\n\n    this.state = {\n      price: item ? item.price : 0,\n    };\n\n    this._onClickEdit = this._onClickEdit.bind(this);\n    this._onChangePrice = this._onChangePrice.bind(this);\n  }\n\n  _onClickEdit(e: React.MouseEvent) {\n    e.preventDefault();\n    this.props.onClickEdit(this.itemId, this.state.price);\n  }\n\n  _onChangePrice(e: React.ChangeEvent<HTMLInputElement>) {\n    const input = e.target.value;\n\n    // Only allow number\n    if (!validator.isNumeric(input, { no_symbols: true })) {\n      e.preventDefault();\n      return;\n    }\n\n    this.setState({\n      price: Number(input),\n    });\n  }\n\n  render() {\n    const { loading, item, formError, classes } = this.props;\n    const { price } = this.state;\n\n    if (loading) {\n      return <LoadingComponent />;\n    }\n\n    if (!item) {\n      return <InternalServerErrorPage message=\"商品が読み込めませんでした\" />;\n    }\n\n    return (\n      <BasePageContainer>\n        <Typography component=\"h1\" variant=\"h5\">\n          商品編集ページ\n        </Typography>\n        <Typography component=\"h2\">{item.name}</Typography>\n        <form className={classes.form} noValidate>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"price\"\n            label=\"値段\"\n            name=\"price\"\n            value={price}\n            onChange={this._onChangePrice}\n          />\n          {formError && (\n            <ErrorMessageComponent id=\"sellButton\" error={formError} />\n          )}\n          <Button\n            id=\"editButton\"\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            onClick={this._onClickEdit}\n          >\n            編集する\n          </Button>\n          <RouteLink to={routes.item.getPath(item.id)}>\n            商品ページへ戻る\n          </RouteLink>\n        </form>\n      </BasePageContainer>\n    );\n  }\n}\n\nexport default PageComponentWithError<any>()(withStyles(styles)(ItemEditPage));\n","import { connect } from 'react-redux';\nimport { fetchItemAction } from '../actions/fetchItemAction';\nimport { AppState } from '../index';\nimport { postItemEditAction } from '../actions/postItemEditAction';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { AnyAction } from 'redux';\nimport ItemEditPage from '../pages/ItemEditPage';\n\nconst mapStateToProps = (state: AppState) => ({\n  loading: state.page.isItemLoading,\n  item: state.viewingItem.item,\n  errorType: state.error.errorType,\n  formError: state.formError.itemEditFormError,\n});\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, AnyAction>,\n) => ({\n  load: (itemId: string) => {\n    dispatch(fetchItemAction(itemId));\n  },\n  onClickEdit: (itemId: number, price: number) => {\n    dispatch(postItemEditAction(itemId, price));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ItemEditPage);\n","import * as React from 'react';\nimport { Button, createStyles, Theme, WithStyles } from '@material-ui/core';\nimport { StyleRules } from '@material-ui/core/styles';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    root: {\n      position: 'relative',\n    },\n    button: {\n      margin: theme.spacing(1),\n    },\n  });\n\nexport interface Props extends WithStyles<typeof styles> {\n  onClick: (e: React.MouseEvent) => void;\n  buttonName: string;\n  loading: boolean;\n}\n\nclass BaseLoadingButton extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    this._onClick = this._onClick.bind(this);\n  }\n\n  _onClick(e: React.MouseEvent) {\n    e.preventDefault();\n\n    this.props.onClick(e);\n  }\n\n  render() {\n    const { loading, buttonName, classes } = this.props;\n\n    return (\n      <div className={classes.root}>\n        <Button\n          className={classes.button}\n          variant=\"contained\"\n          color=\"primary\"\n          disabled={loading}\n          onClick={this._onClick}\n        >\n          {buttonName}\n        </Button>\n      </div>\n    );\n  }\n}\n\nexport const LoadingButton = withStyles(styles)(BaseLoadingButton);\n","import React from 'react';\nimport { ItemData } from '../dataObjects/item';\nimport Typography from '@material-ui/core/Typography/Typography';\nimport TextField from '@material-ui/core/TextField/TextField';\nimport { BuyFormErrorState } from '../reducers/formErrorReducer';\nimport { ErrorMessageComponent } from './ErrorMessageComponent';\nimport {\n  createStyles,\n  StyleRules,\n  Theme,\n  WithStyles,\n} from '@material-ui/core/styles';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport validator from 'validator';\nimport { LoadingButton } from './LoadingButton';\nimport { Link } from 'react-router-dom';\nimport { routes } from '../routes/Route';\n\nconst styles = (theme: Theme): StyleRules =>\n  createStyles({\n    itemImage: {\n      width: '100%',\n      maxWidth: '500px',\n      height: 'auto',\n      textAlign: 'center',\n    },\n    form: {\n      width: '100%',\n      marginTop: theme.spacing(3, 0, 1),\n    },\n  });\n\ninterface ItemBuyFormProps extends WithStyles<typeof styles> {\n  item?: ItemData;\n  onBuyAction: (itemId: number, cardNumber: string) => void;\n  loadingBuy: boolean;\n  errors?: BuyFormErrorState;\n}\n\ninterface ItemBuyFormState {\n  cardNumber: string;\n}\n\nclass ItemBuyFormComponent extends React.Component<\n  ItemBuyFormProps,\n  ItemBuyFormState\n> {\n  constructor(props: ItemBuyFormProps) {\n    super(props);\n\n    this.state = {\n      cardNumber: '',\n    };\n\n    this._onChangeCardNumber = this._onChangeCardNumber.bind(this);\n    this._onClickBuyButton = this._onClickBuyButton.bind(this);\n  }\n\n  _onChangeCardNumber(e: React.ChangeEvent<HTMLInputElement>) {\n    const cardNumber = e.target.value;\n\n    if (cardNumber.length > 8) {\n      return;\n    }\n\n    if (!validator.isHexadecimal(cardNumber) && cardNumber !== '') {\n      return;\n    }\n\n    this.setState({\n      cardNumber: cardNumber.toUpperCase(),\n    });\n  }\n\n  _onClickBuyButton(e: React.MouseEvent) {\n    const { item } = this.props;\n    const id = item ? item.id : 0; // MEMO: この関数がcallされる前にitemの有無は確認されるので0になることはない\n    const { cardNumber } = this.state;\n    this.props.onBuyAction(id, cardNumber);\n  }\n\n  render() {\n    const { item, errors, classes, loadingBuy } = this.props;\n    const cardError = errors ? errors.cardError : undefined;\n    const appError = errors ? errors.buyError : undefined;\n\n    if (!item) {\n      return (\n        <React.Fragment>\n          <Typography variant=\"h4\">エラーが発生しました</Typography>\n          <Link to={routes.timeline.path}>トップページへ戻る</Link>\n        </React.Fragment>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        <img\n          className={classes.itemImage}\n          alt={item.name}\n          src={item.thumbnailUrl}\n        />\n        <Typography variant=\"h4\">{item.name}</Typography>\n        <Typography variant=\"h5\">{`${item.price}ｲｽｺｲﾝ`}</Typography>\n        <form className={classes.form} noValidate>\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            id=\"cardNumber\"\n            label=\"カード番号\"\n            name=\"cardNumber\"\n            helperText=\"16進数大文字で入力してください\"\n            error={!!cardError}\n            value={this.state.cardNumber}\n            onChange={this._onChangeCardNumber}\n            autoFocus\n          />\n          {cardError && (\n            <ErrorMessageComponent id=\"cardNumber\" error={cardError} />\n          )}\n          <LoadingButton\n            onClick={this._onClickBuyButton}\n            buttonName={'購入'}\n            loading={loadingBuy}\n          />\n          {appError && (\n            <ErrorMessageComponent id=\"buyButton\" error={appError} />\n          )}\n        </form>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(ItemBuyFormComponent);\n","import { ResponseError } from './ResponseError';\n\nexport class PaymentResponseError extends ResponseError {}\n","import AppClient from '../httpClients/appClient';\nimport PaymentClient from '../httpClients/paymentClient';\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\nimport { FormErrorState } from '../reducers/formErrorReducer';\nimport { CallHistoryMethodAction, push } from 'connected-react-router';\nimport { Action } from 'redux';\nimport { BuyReq, ErrorRes } from '../types/appApiTypes';\nimport { routes } from '../routes/Route';\nimport { CardReq, CardRes } from '../types/paymentApiTypes';\nimport { PaymentResponseError } from '../errors/PaymentResponseError';\nimport { AppResponseError } from '../errors/AppResponseError';\nimport { ResponseError } from '../errors/ResponseError';\nimport { AppState } from '../index';\n\nexport const BUY_START = 'BUY_START';\nexport const BUY_SUCCESS = 'BUY_SUCCESS';\nexport const BUY_FAIL = 'BUY_FAIL';\nexport const USING_CARD_FAIL = 'USING_CARD_FAIL';\n\nexport type BuyActions =\n  | BuyStartAction\n  | BuySuccessAction\n  | BuyFailAction\n  | UsingCardFailAction\n  | CallHistoryMethodAction;\n\ntype ThunkResult<R> = ThunkAction<R, AppState, undefined, BuyActions>;\n\nexport function buyItemAction(\n  itemId: number,\n  cardNumber: string,\n): ThunkResult<void> {\n  return (dispatch: ThunkDispatch<AppState, any, BuyActions>) => {\n    Promise.resolve(() => {\n      dispatch(buyStartAction());\n    })\n      .then(() => {\n        return PaymentClient.post('/card', {\n          card_number: cardNumber,\n          shop_id: '11', // TODO getting from /settings\n        } as CardReq);\n      })\n      .then((response: Response) => {\n        if (!response.ok) {\n          throw new PaymentResponseError(\n            'request to /card of payment service was failed',\n            response,\n          );\n        }\n\n        return response.json();\n      })\n      .catch((err: Error) => {\n        // Wrapping to judge kinds of error\n        throw new PaymentResponseError(err.message);\n      })\n      .then((body: CardRes) => {\n        return AppClient.post('/buy', {\n          item_id: itemId,\n          token: body.token,\n        } as BuyReq);\n      })\n      .then((response: Response) => {\n        if (!response.ok) {\n          throw new AppResponseError(\n            'request to /buy of app was failed',\n            response,\n          );\n        }\n\n        return response.json();\n      })\n      .then(() => {\n        dispatch(buySuccessAction());\n        dispatch(push(routes.buyComplete.path));\n      })\n      .catch(async (err: Error) => {\n        if (err instanceof ResponseError) {\n          const res = err.getResponse();\n          let action: Function;\n\n          if (err instanceof PaymentResponseError) {\n            action = usingCardFailAction;\n          } else if (err instanceof AppResponseError) {\n            action = buyFailAction;\n          } else {\n            action = buyFailAction;\n          }\n\n          if (res) {\n            const errRes: ErrorRes = await res.json();\n\n            if (errRes) {\n              return dispatch(action(errRes.error));\n            }\n          }\n\n          dispatch(action(err.message));\n          return;\n        }\n\n        dispatch(buyFailAction(err.message));\n      });\n  };\n}\n\nexport interface BuyStartAction extends Action<typeof BUY_START> {}\n\nexport function buyStartAction(): BuyStartAction {\n  return {\n    type: BUY_START,\n  };\n}\n\nexport interface BuySuccessAction extends Action<typeof BUY_SUCCESS> {}\n\nexport function buySuccessAction(): BuySuccessAction {\n  return {\n    type: BUY_SUCCESS,\n  };\n}\n\nexport interface UsingCardFailAction extends Action<typeof USING_CARD_FAIL> {\n  payload: FormErrorState;\n}\n\nexport function usingCardFailAction(error: string): UsingCardFailAction {\n  return {\n    type: USING_CARD_FAIL,\n    payload: {\n      error: undefined,\n      buyFormError: {\n        cardError: error,\n      },\n    },\n  };\n}\nexport interface BuyFailAction extends Action<typeof BUY_FAIL> {\n  payload: FormErrorState;\n}\n\nexport function buyFailAction(error: string): BuyFailAction {\n  return {\n    type: BUY_FAIL,\n    payload: {\n      error: undefined,\n      buyFormError: {\n        buyError: error,\n      },\n    },\n  };\n}\n","import { connect } from 'react-redux';\nimport ItemBuyFormComponent from '../components/ItemBuyFormComponent';\nimport { buyItemAction } from '../actions/buyAction';\nimport { AppState } from '../index';\nimport { ThunkDispatch } from 'redux-thunk';\nimport { ActionTypes } from '../actions/actionTypes';\n\nconst mapStateToProps = (state: AppState) => ({\n  item: state.viewingItem.item,\n  errors: state.formError.buyFormError,\n  loadingBuy: state.buyPage.loadingBuy,\n});\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<AppState, undefined, ActionTypes>,\n) => ({\n  onBuyAction: (itemId: number, cardNumber: string) => {\n    dispatch(buyItemAction(itemId, cardNumber));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ItemBuyFormComponent);\n","import React from 'react';\nimport ItemBuyFormContainer from '../containers/ItemBuyFormContainer';\nimport BasePageContainer from '../containers/BasePageContainer';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { ItemData } from '../dataObjects/item';\nimport LoadingComponent from '../components/LoadingComponent';\nimport { ErrorProps, PageComponentWithError } from '../hoc/withBaseComponent';\n\ntype Props = {\n  loading: boolean;\n  load: (itemId: string) => void;\n  item?: ItemData;\n} & RouteComponentProps<{ item_id: string }> &\n  ErrorProps;\n\nclass ItemBuyPage extends React.Component<Props> {\n  constructor(props: Props) {\n    super(props);\n\n    const { item } = props;\n    const item_id = props.match.params.item_id;\n\n    // 商品が渡されない or 渡された商品とURLが一致しない場合は商品取得をする\n    if (!item || item.id.toString() !== item_id) {\n      props.load(item_id);\n    }\n  }\n\n  render() {\n    const { loading } = this.props;\n\n    return (\n      <BasePageContainer>\n        {loading ? <LoadingComponent /> : <ItemBuyFormContainer />}\n      </BasePageContainer>\n    );\n  }\n}\n\nexport default PageComponentWithError<Props>()(ItemBuyPage);\n","import { connect } from 'react-redux';\nimport { fetchItemAction } from '../actions/fetchItemAction';\nimport { AppState } from '../index';\nimport ItemBuyPage from '../pages/ItemBuyPage';\n\nconst mapStateToProps = (state: AppState) => ({\n  loading: !state.viewingItem.item, // 商品がstateにない場合はloadingにする\n  item: state.viewingItem.item,\n  errorType: state.error.errorType,\n});\nconst mapDispatchToProps = (dispatch: any) => ({\n  load: (itemId: string) => {\n    dispatch(fetchItemAction(itemId));\n  },\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(ItemBuyPage);\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport SignInPage from '../pages/SignInPage';\nimport SignUpPage from '../pages/SignUpPage';\nimport SellPage from '../pages/SellPage';\nimport ItemPageContainer from '../containers/ItemPageContainer';\nimport ItemListPageContainer from '../containers/ItemListPageContainer';\nimport TransactionPageContainer from '../containers/TransactionPageContainer';\nimport UserPageContainer from '../containers/UserPageContainer';\nimport UserSettingPageContainer from '../containers/UserSettingPageContainer';\nimport AuthRoute from '../containers/AuthContainer';\nimport NonAuthRoute from '../containers/NonAuthContainer';\nimport { NotFoundPage } from '../pages/error/NotFoundPage';\nimport TopPage from '../pages/TopPage';\nimport CategoryItemListPageContainer from '../containers/CategoryItemListPageContainer';\nimport BuyCompleteContainer from '../containers/BuyCompleteContainer';\nimport ItemEditPageContainer from '../containers/ItemEditPageContainer';\nimport ItemBuyPageContainer from '../containers/ItemBuyPageContainer';\n\ninterface route {\n  [name: string]: {\n    path: string;\n    getPath: (...params: any) => string; // TODO: optionalにしたい\n  };\n}\n\nexport const routes: route = {\n  top: {\n    path: '/',\n    getPath: () => '/',\n  },\n  login: {\n    path: '/login',\n    getPath: () => '/login',\n  },\n  register: {\n    path: '/register',\n    getPath: () => 'register',\n  },\n  timeline: {\n    path: '/timeline',\n    getPath: () => '/timeline',\n  },\n  categoryTimeline: {\n    path: '/categories/:category_id/items',\n    getPath: (categoryId: number) => `/categories/${categoryId}/items`,\n  },\n  sell: {\n    path: '/sell',\n    getPath: () => '/sell',\n  },\n  item: {\n    path: '/items/:item_id',\n    getPath: (itemId: number) => `/items/${itemId}`,\n  },\n  itemEdit: {\n    path: '/items/:item_id/edit',\n    getPath: (itemId: number) => `/items/${itemId}/edit`,\n  },\n  buy: {\n    path: '/items/:item_id/buy',\n    getPath: (itemId: number) => `/items/${itemId}/buy`,\n  },\n  buyComplete: {\n    path: '/buy/complete',\n    getPath: () => '/buy/complete',\n  },\n  transaction: {\n    path: '/transactions/:item_id',\n    getPath: (itemId: number) => `/transactions/${itemId}`,\n  },\n  user: {\n    path: '/users/:user_id',\n    getPath: (userId: number) => `/users/${userId}`,\n  },\n  userSetting: {\n    path: '/users/setting',\n    getPath: () => '/users/setting',\n  },\n};\n\nexport const AppRoute: React.FC = () => {\n  return (\n    <Switch>\n      <NonAuthRoute exact path={routes.top.path} component={TopPage} />\n      <NonAuthRoute exact path={routes.login.path} component={SignInPage} />\n      <NonAuthRoute exact path={routes.register.path} component={SignUpPage} />\n      <AuthRoute\n        exact\n        path={routes.timeline.path}\n        component={ItemListPageContainer}\n      />\n      <AuthRoute\n        exact\n        path={routes.categoryTimeline.path}\n        component={CategoryItemListPageContainer}\n      />\n      <AuthRoute exact path={routes.sell.path} component={SellPage} />\n      <AuthRoute\n        exact\n        path={routes.itemEdit.path}\n        component={ItemEditPageContainer}\n      />\n      <AuthRoute\n        exact\n        path={routes.buy.path}\n        component={ItemBuyPageContainer}\n      />\n      <AuthRoute\n        exact\n        path={routes.buyComplete.path}\n        component={BuyCompleteContainer}\n      />\n      <AuthRoute exact path={routes.item.path} component={ItemPageContainer} />{' '}\n      <AuthRoute\n        exact\n        path={routes.transaction.path}\n        component={TransactionPageContainer}\n      />\n      <AuthRoute\n        exact\n        path={routes.userSetting.path}\n        component={UserSettingPageContainer}\n      />\n      <AuthRoute exact path={routes.user.path} component={UserPageContainer} />\n      <Route component={NotFoundPage} />\n    </Switch>\n  );\n};\n","import React from 'react';\nimport './App.css';\nimport { AppRoute } from './routes/Route';\n\nconst App: React.FC<{}> = () => (\n  <React.Fragment>\n    <AppRoute />\n  </React.Fragment>\n);\n\nexport default App;\n","import logger from './logger';\nimport checkLocationChange from './checkLocationChange';\nimport { Middleware } from 'redux';\n\nconst middleware: Middleware[] = [logger, checkLocationChange];\n\nexport default middleware;\n","import { Dispatch, Middleware, MiddlewareAPI } from 'redux';\nimport { AppState } from '../index';\nimport { ActionTypes } from '../actions/actionTypes';\n\nconst logger: Middleware = <S extends AppState>({\n  getState,\n}: MiddlewareAPI<Dispatch, S>) => (next: Dispatch<ActionTypes>) => (\n  action: ActionTypes,\n): any => {\n  console.group(action.type);\n  console.info('dispatching', action);\n  const result = next(action);\n  console.log('next state', getState());\n  console.groupEnd();\n  return result;\n};\n\nexport default logger;\n","import { Dispatch, Middleware, MiddlewareAPI } from 'redux';\nimport { AppState } from '../index';\nimport { LOCATION_CHANGE } from 'connected-react-router';\nimport { pathNameChangeAction } from '../actions/locationChangeAction';\nimport { ActionTypes } from '../actions/actionTypes';\n\n// react-routerのページ遷移発火時、pathnameが変わった場合は独自のactionを発火する\nconst checkLocationChange: Middleware = <S extends AppState>(\n  store: MiddlewareAPI<Dispatch, S>,\n) => (next: Dispatch<ActionTypes>) => (action: ActionTypes): any => {\n  const { getState, dispatch } = store;\n  if (action.type !== LOCATION_CHANGE) {\n    return next(action);\n  }\n\n  const { router } = getState();\n  const currentPath = router.location.pathname;\n  const nextPath = action.payload.location.pathname;\n\n  if (currentPath === nextPath) {\n    return next(action);\n  }\n\n  dispatch(pathNameChangeAction());\n  return next(action);\n};\n\nexport default checkLocationChange;\n","import { Action } from 'redux';\n\nexport const PATH_NAME_CHANGE = 'PATH_NAME_CHANGE';\n\nexport type LocationChangeActions = PathNameChangeAction;\n\nexport interface PathNameChangeAction extends Action<typeof PATH_NAME_CHANGE> {}\n\nexport const pathNameChangeAction = (): PathNameChangeAction => ({\n  type: PATH_NAME_CHANGE,\n});\n","import { LOGIN_SUCCESS } from '../actions/authenticationActions';\nimport { REGISTER_SUCCESS } from '../actions/registerAction';\nimport {\n  FETCH_SETTINGS_FAIL,\n  FETCH_SETTINGS_SUCCESS,\n} from '../actions/settingsAction';\nimport { UserData } from '../dataObjects/user';\nimport { ActionTypes } from '../actions/actionTypes';\n\nexport interface AuthStatusState {\n  userId?: number;\n  accountName?: string;\n  address?: string;\n  numSellItems?: number;\n  checked: boolean; // 初回のsettings取得が完了したかどうか\n}\n\nconst initialState: AuthStatusState = {\n  checked: false,\n};\n\nconst authStatus = (\n  state: AuthStatusState = initialState,\n  action: ActionTypes,\n): AuthStatusState => {\n  switch (action.type) {\n    case LOGIN_SUCCESS:\n    case REGISTER_SUCCESS: {\n      return {\n        ...state,\n        ...action.payload,\n      };\n    }\n    case FETCH_SETTINGS_SUCCESS: {\n      const user: UserData | undefined = action.payload.settings.user;\n      let userPayload:\n        | {\n            userId: number;\n            accountName: string;\n            address?: string;\n            numSellItems: number;\n          }\n        | {} = {};\n\n      if (user) {\n        userPayload = {\n          userId: user.id,\n          accountName: user.accountName,\n          address: user.address || undefined,\n          numSellItems: user.numSellItems,\n        };\n      }\n\n      return {\n        ...state,\n        ...userPayload,\n        checked: true,\n      };\n    }\n    case FETCH_SETTINGS_FAIL: {\n      return {\n        ...state,\n        checked: true,\n      };\n    }\n    default:\n      return state;\n  }\n};\n\nexport default authStatus;\n","import { LOGIN_FAIL } from '../actions/authenticationActions';\nimport { REGISTER_FAIL } from '../actions/registerAction';\nimport { SELLING_ITEM_FAIL } from '../actions/sellingItemAction';\nimport { BUY_FAIL, USING_CARD_FAIL } from '../actions/buyAction';\nimport { POST_ITEM_EDIT_FAIL } from '../actions/postItemEditAction';\nimport { ActionTypes } from '../actions/actionTypes';\n\nexport interface FormErrorState {\n  error?: string;\n  buyFormError?: BuyFormErrorState;\n  itemEditFormError?: string;\n}\n\nexport interface BuyFormErrorState {\n  cardError?: string; // Error from payment service\n  buyError?: string; // Error from app\n}\n\nconst initialState: FormErrorState = {\n  error: undefined,\n  buyFormError: {},\n  itemEditFormError: undefined,\n};\n\nconst formError = (\n  state: FormErrorState = initialState,\n  action: ActionTypes,\n): FormErrorState => {\n  switch (action.type) {\n    case LOGIN_FAIL:\n    case REGISTER_FAIL:\n    case USING_CARD_FAIL:\n    case BUY_FAIL:\n    case SELLING_ITEM_FAIL: {\n      return {\n        ...action.payload,\n      };\n    }\n    case POST_ITEM_EDIT_FAIL:\n      return {\n        ...state,\n        itemEditFormError: action.payload.itemEditFormError,\n      };\n    default:\n      return initialState;\n  }\n};\n\nexport default formError;\n","import { ItemData } from '../dataObjects/item';\nimport { FETCH_ITEM_SUCCESS } from '../actions/fetchItemAction';\nimport { ActionTypes } from '../actions/actionTypes';\n\nexport interface ViewingItemState {\n  item?: ItemData;\n}\n\nconst initialState: ViewingItemState = {};\n\nconst viewingItem = (\n  state: ViewingItemState = initialState,\n  action: ActionTypes,\n): ViewingItemState => {\n  switch (action.type) {\n    case FETCH_ITEM_SUCCESS:\n      return { ...state, item: action.payload.item };\n    default:\n      return state;\n  }\n};\n\nexport default viewingItem;\n","import { UserData } from '../dataObjects/user';\nimport { FETCH_USER_PAGE_DATA_SUCCESS } from '../actions/fetchUserPageDataAction';\nimport { ActionTypes } from '../actions/actionTypes';\nimport { PATH_NAME_CHANGE } from '../actions/locationChangeAction';\n\n// ユーザページに表示するユーザ情報のstate\nexport interface ViewingUserState {\n  user?: UserData;\n}\n\nconst initialState: ViewingUserState = {};\n\nconst viewingUser = (\n  state: ViewingUserState = initialState,\n  action: ActionTypes,\n): ViewingUserState => {\n  switch (action.type) {\n    case PATH_NAME_CHANGE:\n      return initialState;\n    case FETCH_USER_PAGE_DATA_SUCCESS:\n      return { ...state, user: action.payload.user };\n    default:\n      return { ...state };\n  }\n};\n\nexport default viewingUser;\n","import {\n  FETCH_ITEM_FAIL,\n  FETCH_ITEM_START,\n  FETCH_ITEM_SUCCESS,\n} from '../actions/fetchItemAction';\nimport {\n  FETCH_SETTINGS_FAIL,\n  FETCH_SETTINGS_START,\n  FETCH_SETTINGS_SUCCESS,\n} from '../actions/settingsAction';\nimport {\n  FETCH_TIMELINE_FAIL,\n  FETCH_TIMELINE_SUCCESS,\n} from '../actions/fetchTimelineAction';\nimport {\n  FETCH_USER_PAGE_DATA_FAIL,\n  FETCH_USER_PAGE_DATA_START,\n  FETCH_USER_PAGE_DATA_SUCCESS,\n} from '../actions/fetchUserPageDataAction';\nimport { PATH_NAME_CHANGE } from '../actions/locationChangeAction';\nimport { ActionTypes } from '../actions/actionTypes';\n\nexport interface PageState {\n  isLoading: boolean;\n  isItemLoading: boolean;\n  isTimelineLoading: boolean;\n  isUserPageLoading: boolean;\n}\n\nconst initialState: PageState = {\n  isLoading: true,\n  isItemLoading: true,\n  isTimelineLoading: true,\n  isUserPageLoading: true,\n};\n\nconst pathChangeState: PageState = {\n  isLoading: false, // Settings取得時しかtrueにならない\n  isItemLoading: true,\n  isTimelineLoading: true,\n  isUserPageLoading: true,\n};\n\nconst page = (\n  state: PageState = initialState,\n  action: ActionTypes,\n): PageState => {\n  switch (action.type) {\n    // Item page\n    case FETCH_ITEM_START:\n      return { ...state, isItemLoading: true };\n    case FETCH_ITEM_SUCCESS:\n    case FETCH_ITEM_FAIL:\n      return { ...state, isItemLoading: false };\n    // Timeline\n    case FETCH_TIMELINE_SUCCESS:\n    case FETCH_TIMELINE_FAIL:\n      return { ...state, isTimelineLoading: false };\n    // Settings\n    case FETCH_SETTINGS_START:\n      return { ...state, isLoading: true };\n    case FETCH_SETTINGS_SUCCESS:\n    case FETCH_SETTINGS_FAIL:\n      return { ...state, isLoading: false };\n    // User page\n    case FETCH_USER_PAGE_DATA_START:\n      return { ...state, isUserPageLoading: true };\n    case FETCH_USER_PAGE_DATA_SUCCESS:\n    case FETCH_USER_PAGE_DATA_FAIL:\n      return { ...state, isUserPageLoading: false };\n    // Location change\n    case PATH_NAME_CHANGE:\n      return pathChangeState;\n    default:\n      return { ...state };\n  }\n};\n\nexport default page;\n","import { ActionTypes } from '../actions/actionTypes';\nimport { POST_SHIPPED_FAIL } from '../actions/postShippedAction';\nimport { POST_SHIPPED_DONE_FAIL } from '../actions/postShippedDoneAction';\nimport { POST_COMPLETE_FAIL } from '../actions/postCompleteAction';\nimport { SNACK_BAR_CLOSE } from '../actions/snackBarAction';\n\nexport interface SnackBarState {\n  reason: string;\n  available: boolean;\n}\n\nconst initialState: SnackBarState = {\n  reason: '',\n  available: false,\n};\n\nconst snackBar = (\n  state: SnackBarState = initialState,\n  action: ActionTypes,\n): SnackBarState => {\n  switch (action.type) {\n    case POST_SHIPPED_FAIL:\n    case POST_SHIPPED_DONE_FAIL:\n    case POST_COMPLETE_FAIL:\n      return {\n        reason: action.snackBarMessage,\n        available: true,\n      };\n    case SNACK_BAR_CLOSE:\n      return {\n        reason: '',\n        available: false,\n      };\n    default:\n      return { ...state };\n  }\n};\n\nexport default snackBar;\n","import {\n  BUY_FAIL,\n  BUY_START,\n  BUY_SUCCESS,\n  USING_CARD_FAIL,\n} from '../actions/buyAction';\nimport { ActionTypes } from '../actions/actionTypes';\n\nexport interface BuyPageState {\n  loadingBuy: boolean;\n}\n\nconst initialState: BuyPageState = {\n  loadingBuy: false,\n};\n\nconst buyPage = (\n  state: BuyPageState = initialState,\n  action: ActionTypes,\n): BuyPageState => {\n  switch (action.type) {\n    case BUY_START:\n      return { ...state, loadingBuy: true };\n    case BUY_SUCCESS:\n    case BUY_FAIL:\n    case USING_CARD_FAIL:\n      return { ...state, loadingBuy: false };\n    default:\n      return { ...state };\n  }\n};\n\nexport default buyPage;\n","import { CategorySimple } from '../dataObjects/category';\nimport { FETCH_SETTINGS_SUCCESS } from '../actions/settingsAction';\nimport { ActionTypes } from '../actions/actionTypes';\n\nexport interface CategoriesState {\n  categories: CategorySimple[];\n}\n\nconst initialState: CategoriesState = {\n  categories: [],\n};\n\nconst categories = (\n  state: CategoriesState = initialState,\n  action: ActionTypes,\n): CategoriesState => {\n  switch (action.type) {\n    case FETCH_SETTINGS_SUCCESS:\n      return {\n        categories: action.payload.settings.categories,\n      };\n    default:\n      return { ...state };\n  }\n};\n\nexport default categories;\n","import { TimelineItem } from '../dataObjects/item';\nimport { FETCH_TIMELINE_SUCCESS } from '../actions/fetchTimelineAction';\nimport { PATH_NAME_CHANGE } from '../actions/locationChangeAction';\nimport { ActionTypes } from '../actions/actionTypes';\n\nexport interface TimelineState {\n  items: TimelineItem[];\n  hasNext: boolean;\n  categoryId?: number;\n  categoryName?: string;\n}\n\nconst initialState: TimelineState = {\n  items: [],\n  hasNext: false,\n};\n\nconst timeline = (\n  state: TimelineState = initialState,\n  action: ActionTypes,\n): TimelineState => {\n  switch (action.type) {\n    case PATH_NAME_CHANGE:\n      return initialState;\n    case FETCH_TIMELINE_SUCCESS:\n      const { payload } = action;\n      return {\n        items: state.items.concat(payload.items),\n        hasNext: payload.hasNext,\n        categoryId: payload.categoryId,\n        categoryName: payload.categoryName,\n      };\n    default:\n      return { ...state };\n  }\n};\n\nexport default timeline;\n","import { TransactionItem } from '../dataObjects/item';\nimport { FETCH_TRANSACTIONS_SUCCESS } from '../actions/fetchTransactionsAction';\nimport { FETCH_USER_PAGE_DATA_SUCCESS } from '../actions/fetchUserPageDataAction';\nimport { ActionTypes } from '../actions/actionTypes';\nimport { PATH_NAME_CHANGE } from '../actions/locationChangeAction';\n\nexport interface TransactionsState {\n  items: TransactionItem[];\n  hasNext: boolean;\n}\n\nconst initialState: TransactionsState = {\n  items: [],\n  hasNext: false,\n};\n\nconst transactions = (\n  state: TransactionsState = initialState,\n  action: ActionTypes,\n): TransactionsState => {\n  switch (action.type) {\n    case PATH_NAME_CHANGE:\n      // MEMO: ページ遷移したら再度APIを叩かせるようにリセットする\n      return initialState;\n    case FETCH_TRANSACTIONS_SUCCESS:\n      return {\n        items: state.items.concat(action.payload.items),\n        hasNext: action.payload.hasNext,\n      };\n    case FETCH_USER_PAGE_DATA_SUCCESS:\n      return {\n        items: state.items.concat(action.payload.transactions),\n        hasNext: action.payload.transactionsHasNext,\n      };\n    default:\n      return { ...state };\n  }\n};\n\nexport default transactions;\n","import { TimelineItem } from '../dataObjects/item';\nimport { FETCH_USER_ITEMS_SUCCESS } from '../actions/fetchUserItemsAction';\nimport { FETCH_USER_PAGE_DATA_SUCCESS } from '../actions/fetchUserPageDataAction';\nimport { ActionTypes } from '../actions/actionTypes';\nimport { PATH_NAME_CHANGE } from '../actions/locationChangeAction';\n\nexport interface UserItemsState {\n  items: TimelineItem[];\n  hasNext: boolean;\n}\n\nconst initialState: UserItemsState = {\n  items: [],\n  hasNext: false,\n};\n\nconst userItems = (\n  state: UserItemsState = initialState,\n  action: ActionTypes,\n): UserItemsState => {\n  switch (action.type) {\n    case PATH_NAME_CHANGE:\n      // MEMO: ページ遷移したら再度APIを叩かせるようにリセットする\n      return initialState;\n    case FETCH_USER_ITEMS_SUCCESS:\n      return {\n        items: state.items.concat(action.payload.items),\n        hasNext: action.payload.hasNext,\n      };\n    case FETCH_USER_PAGE_DATA_SUCCESS:\n      return {\n        items: state.items.concat(action.payload.items),\n        hasNext: action.payload.itemsHasNext,\n      };\n    default:\n      return { ...state };\n  }\n};\n\nexport default userItems;\n","import { combineReducers } from 'redux';\nimport authStatus from './authStatusReducer';\nimport formError from './formErrorReducer';\nimport viewingItem from './viewingItemReducer';\nimport viewingUser from './viewingUserReducer';\nimport error from './errorReducer';\nimport page from './pageReducuer';\nimport snackBar from './snackBarReducer';\nimport buyPage from './buyPageReducer';\nimport categories from './categoriesReducer';\nimport timeline from './timelineReducer';\nimport transactions from './transactionsReducer';\nimport userItems from './userItemsReducer';\nimport { connectRouter } from 'connected-react-router';\nimport { History } from 'history';\n\nexport default (history: History) =>\n  combineReducers({\n    router: connectRouter(history),\n    authStatus,\n    formError,\n    viewingItem,\n    viewingUser,\n    error,\n    page,\n    snackBar,\n    buyPage,\n    categories,\n    timeline,\n    transactions,\n    userItems,\n  });\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport { createBrowserHistory } from 'history';\nimport { ConnectedRouter } from 'connected-react-router';\nimport { getStore } from './configureStore';\nimport createRootReducer from './reducers/index';\n\nconst history = createBrowserHistory();\nconst rootReducers = createRootReducer(history);\nconst store = getStore(rootReducers, history);\n\nexport type AppState = ReturnType<typeof rootReducers>;\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedRouter history={history}>\n      <App />\n    </ConnectedRouter>\n  </Provider>,\n  document.getElementById('root'),\n);\n","import { applyMiddleware, createStore, Reducer, Store } from 'redux';\nimport { History } from 'history';\nimport { routerMiddleware } from 'connected-react-router';\nimport thunk from 'redux-thunk';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport middleware from './middlewares';\n\nexport const getStore = (reducer: Reducer, history: History): Store => {\n  return createStore(\n    reducer,\n    composeWithDevTools(\n      applyMiddleware(thunk, routerMiddleware(history), ...middleware),\n    ),\n  );\n};\n"],"sourceRoot":""}